{"mappings":"6DAAA,IAAMA,EAAO,CACXC,SAAUC,SAASC,cAAc,aACjCC,SAAUF,SAASC,cAAc,YACjCE,eAAgBH,SAASC,cAAc,qBACvCG,aAAcJ,SAASC,cAAc,UACrCI,QAASL,SAASC,cAAc,iBAChCK,WAAYN,SAASC,cAAc,qBACnCM,UAAWP,SAASQ,eAAe,cACnCC,iBAAkBT,SAASC,cAAc,iBACzCS,KAAMV,SAASC,cAAc,iBAC7BU,yBAA0BX,SAASC,cAAc,kBACjDW,iBAAkBZ,SAASC,cAAc,UACzCY,iBAAkBb,SAASC,cAAc,aACzCa,gBAAiBd,SAASC,cAAc,oBCYnC,SAASc,EAAUC,GAIxB,IAHA,IAAMC,EAASC,KAAKC,MAAMC,aAAaC,QAAQ,WACzCC,EAAY,GAETC,EAAa,EAAGA,EAAaP,EAAUQ,OAAQD,IAAc,C,IAC/DE,GAAW,EAAXC,GAAW,EAAXC,OAAWC,E,IAAhB,QAAKC,EAAAC,EAAeb,EAAMc,OAAAC,cAArBP,GAAAI,EAAAC,EAAWG,QAAAC,MAAXT,GAAW,GAAX,IAAMU,EAANN,EAAWM,MACVnB,EAAUO,KAAgBY,EAAMC,IAClCd,EAAUe,KAAKF,EAAMG,K,WAFpBZ,GAAW,EAAXC,EAAWY,C,aAAXd,GAAW,MAAXK,EAAWU,QAAXV,EAAWU,Q,YAAXd,E,MAAAC,C,GAMP,OAAyB,IAArBL,EAAUE,OACL,UAGFF,EAAUmB,KAAK,K,CAmCjB,SAASC,EAAmBC,GACjCA,EACGC,KAAI,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAa9B,EAAS6B,EAAT7B,UAAW+B,EAAKF,EAALE,MAAOC,EAAYH,EAAZG,aAAcZ,EAAES,EAAFT,GACnD,MAAO,mCAEqDa,OAFlBb,EAAG,iHAEmCa,OAApBH,EAAY,UAGlCG,OAH0CF,EAAM,2IAK1CE,OAFNF,EAAM,uGAIFE,OAFElC,EAAUC,GAAW,kHAIrCiC,QADZD,GAAgB,WAChBE,MAAM,EAAG,GAAG,+E,IAK7BC,SAAQ,SAAAC,G,OAAKtD,EAAKQ,WAAW+C,mBAAmB,YAAaD,E,aC7FlEE,OAAOC,eAAeC,EAAS,aAAc,CACzCrB,OAAO,IAEXqB,EAAQC,QACR,SAAyBC,EAAUC,GAC/B,KAAMD,aAAoBC,GACtB,MAAM,IAAIC,UAAU,oC,WCG5B,SAASC,EAAkBC,EAAQC,GAC/B,IAAI,IAAIC,EAAI,EAAGA,EAAID,EAAMvC,OAAQwC,IAAI,CACjC,IAAIC,EAAaF,EAAMC,GACvBC,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDd,OAAOC,eAAeO,EAAQG,EAAWI,IAAKJ,E,EAftDX,OAAOC,eAAee,EAAS,aAAc,CACzCnC,OAAO,IAEXmC,EAAQb,QACR,SAAsBE,EAAaY,EAAYC,GACvCD,GAAYV,EAAkBF,EAAYc,UAAWF,GACrDC,GAAaX,EAAkBF,EAAaa,GAChD,OAAOb,C,ECRI,ICKTe,EAAU,ID8Db,W,sBAnEkBC,I,aAEjBC,KAAKC,kBAAoB,GACzBD,KAAKE,gBAAkB,GACvBF,KAAKG,cACLH,KAAKI,kB,iBAEPX,IAAA,c,MAAA,WACMjD,aAAaC,QAAQ,mBACvBuD,KAAKC,kBAAoB3D,KAAKC,MAC5BC,aAAaC,QAAQ,kB,IAM3BgD,IAAA,mB,MAAA,WACMjD,aAAaC,QAAQ,iBACvBuD,KAAKE,gBAAkB5D,KAAKC,MAAMC,aAAaC,QAAQ,gB,IAK3DgD,IAAA,oB,MAAA,SAAkBY,GACZ7D,aAAaC,QAAQ,mBACvBuD,KAAKC,kBAAoB3D,KAAKC,MAC5BC,aAAaC,QAAQ,mBAGzBuD,KAAKC,kBAAkBxC,KAAK4C,GAC5BL,KAAKM,kB,IAEPb,IAAA,kB,MAAA,SAAgBY,GACV7D,aAAaC,QAAQ,iBACvBuD,KAAKE,gBAAkB5D,KAAKC,MAAMC,aAAaC,QAAQ,iBAEzDuD,KAAKE,gBAAgBzC,KAAK4C,GAC1BL,KAAKO,gB,IAGPd,IAAA,mB,MAAA,WACEjD,aAAagE,QACX,gBACAlE,KAAKmE,UAAUT,KAAKC,mB,IAIxBR,IAAA,iB,MAAA,WACEjD,aAAagE,QAAQ,cAAelE,KAAKmE,UAAUT,KAAKE,iB,IAG1DT,IAAA,qB,MAAA,WACE,GAAKjD,aAAaC,QAAQ,iBAI1B,OAAOH,KAAKC,MAAMC,aAAaC,QAAQ,iB,IAEzCgD,IAAA,oB,MAAA,WACE,GAAKjD,aAAaC,QAAQ,eAI1B,OAAOH,KAAKC,MAAMC,aAAaC,QAAQ,e,OAIxC,IC5DHqB,EAAmBgC,EAAQY,sBAEVtF,SAASC,cAAc,iBAE/BsF,iBAAiB,SAE1B,WACEzF,EAAKQ,WAAWkF,UAAY,GAC5B9C,EAAmBgC,EAAQe,oB","sources":["src/js/refs.js","src/js/voprim.js","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/watched-queue.js","src/library.js"],"sourcesContent":["const refs = {\n  backdrop: document.querySelector('.backdrop'),\n  teamLink: document.querySelector('.js-team'),\n  spinerBackdrop: document.querySelector('.spiner__backdrop'),\n  filmsListRef: document.querySelector('.films'),\n  gallery: document.querySelector('.gallery__set'),\n  libGallery: document.querySelector('.lib-gallery__set'),\n  container: document.getElementById('pagination'),\n  galleryGenreItem: document.querySelector('.film__genres'),\n  form: document.querySelector('.header__form'),\n  closeModalBtnForOneMovie: document.querySelector('.modal__button'),\n  modalForOneMovie: document.querySelector('.modal'),\n  backdropOneMovie: document.querySelector('.backdrop'),\n  btnAddToWatched: document.querySelector('.btn__modal-add'),\n};\n\nexport { refs };\n","import { refs } from './refs';\n// import TrendingMovies from './MykolaPom';\n\n// функция отрисовки топ фильмов\nexport function renderFilmsMarkup(films) {\n  films\n    .map(({ poster_path, genre_ids, title, release_date, id }) => {\n      return `<li class=\"films__item\" data-id=${id}>\n                <div class=\"films__img\">\n                    <img src=https://image.tmdb.org/t/p/original${poster_path} alt=\"${title}\" loading=\"lazy\">\n                </div>\n                <div class=\"films__description\">\n                  <p class=\"films__title\">${title}</p>\n                  <div class=\"films__meta\">\n                    <span class=\"films__genres\">${getGenres(genre_ids)}</span>\n                    <span class=\"films__sep\">|</span>\n                    <span class=\"films__data\">${(\n                      release_date || 'No info'\n                    ).slice(0, 4)}</span>\n                  </div>\n                </div>\n            </li>`;\n    })\n    .forEach(c => refs.gallery.insertAdjacentHTML('beforeend', c));\n}\nexport function getGenres(genre_ids) {\n  const genres = JSON.parse(localStorage.getItem('genres'));\n  const genresArr = [];\n\n  for (let genreIndex = 0; genreIndex < genre_ids.length; genreIndex++) {\n    for (const value of genres) {\n      if (genre_ids[genreIndex] === value.id) {\n        genresArr.push(value.name);\n      }\n    }\n  }\n  if (genresArr.length === 0) {\n    return 'No info';\n  }\n  // console.log(genresArr);\n  return genresArr.join(', ');\n}\n\n// функция отрисовки жанров\n\n// export function renderGenres(renderGenresFilms) {\n//   let genreString;\n//   renderGenresFilms.map(film => {\n//     const filmGenres = film.genre_ids;\n//     let array = [];\n\n//     //console.log('filmGenres', filmGenres);\n//     filmGenres.map(genre => {\n//       const filmGenre = localStorage.getItem(genre);\n//       array.push(filmGenre);\n//       genreString = array.join(', ');\n//     });\n//   });\n//   //refs.galleryGenreItem.textContent = 777;\n//   return genreString;\n// }\n\n// // Функция записи жанров в локалсторедж\n// export async function getGenres() {\n//   const trendingMovies = new TrendingMovies();\n//   try {\n//     const result = await trendingMovies.fetchGenresIds();\n//     for (const genre of result) {\n//       localStorage.setItem(`${genre.id}`, `${genre.name}`);\n//     }\n//   } catch (error) {\n//     console.log(error);\n//   }\n// }\n// lib-gallery-render-func\nexport function renderFilmsLibrary(films) {\n  films\n    .map(({ poster_path, genre_ids, title, release_date, id }) => {\n      return `<li class=\"films__item\" data-id=${id}>\n                <div class=\"films__img\">\n                    <img src=https://image.tmdb.org/t/p/original${poster_path} alt=\"${title}\" loading=\"lazy\">\n                </div>\n                <div class=\"films__description\">\n                  <p class=\"films__title\">${title}</p>\n                  <div class=\"films__meta\">\n                    <span class=\"films__genres\">${getGenres(genre_ids)}</span>\n                    <span class=\"films__sep\">|</span>\n                    <span class=\"films__data\">${(\n                      release_date || 'No info'\n                    ).slice(0, 4)}</span>\n                  </div>\n                </div>\n            </li>`;\n    })\n    .forEach(c => refs.libGallery.insertAdjacentHTML('beforeend', c));\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","export default class FilmsStorage {\n  constructor() {\n    this._watchedFilmsList = [];\n    this._queueFilmsList = [];\n    this.refreshData();\n    this.refreshDataQueue();\n  }\n  refreshData() {\n    if (localStorage.getItem('watched-films')) {\n      this._watchedFilmsList = JSON.parse(\n        localStorage.getItem('watched-films')\n      );\n    }\n    //console.log('пусто');\n  }\n\n  refreshDataQueue() {\n    if (localStorage.getItem('queue-films')) {\n      this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    }\n    //console.log('пусто');\n  }\n\n  addToWatchedFilms(item) {\n    if (localStorage.getItem('watched-films')) {\n      this._watchedFilmsList = JSON.parse(\n        localStorage.getItem('watched-films')\n      );\n    }\n    this._watchedFilmsList.push(item);\n    this.saveWatchedFilms();\n  }\n  addToQueueFilms(item) {\n    if (localStorage.getItem('queue-films')) {\n      this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    }\n    this._queueFilmsList.push(item);\n    this.saveQueueFilms();\n  }\n\n  saveWatchedFilms() {\n    localStorage.setItem(\n      'watched-films',\n      JSON.stringify(this._watchedFilmsList)\n    );\n  }\n\n  saveQueueFilms() {\n    localStorage.setItem('queue-films', JSON.stringify(this._queueFilmsList));\n  }\n\n  getWathedFilmsList() {\n    if (!localStorage.getItem('watched-films')) {\n      return;\n    }\n    // this._watchedFilmsList = JSON.parse(localStorage.getItem('watched-films'));\n    return JSON.parse(localStorage.getItem('watched-films'));\n  }\n  getQueueFilmsList() {\n    if (!localStorage.getItem('queue-films')) {\n      return;\n    }\n    // this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    return JSON.parse(localStorage.getItem('queue-films'));\n  }\n}\n\n//const storage = new FilmsStorage();\n\n//const addToWatchedBtn = document.querySelector('.btn__modal-add');\n\n//addToWatchedBtn.addEventListener('click', addToLS);\n\n//function addToLS() {\n//  console.log(1);\n//}\n","// Федір, твори магію)\nimport { refs } from './js/refs';\nimport { renderFilmsLibrary } from './js/voprim';\nimport FilmsStorage from './js/watched-queue';\n\nconst storage = new FilmsStorage();\n\nrenderFilmsLibrary(storage.getWathedFilmsList());\n\nconst queueBtn = document.querySelector('.queue-button');\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onQueueBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getQueueFilmsList());\n}\n"],"names":["$37e33676934ad046$export$21666b427502ea6d","backdrop","document","querySelector","teamLink","spinerBackdrop","filmsListRef","gallery","libGallery","container","getElementById","galleryGenreItem","form","closeModalBtnForOneMovie","modalForOneMovie","backdropOneMovie","btnAddToWatched","$f1b5ea32af53b705$export$c5604fa8028da00","genre_ids","genres","JSON","parse","localStorage","getItem","genresArr","genreIndex","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","id","push","name","err","return","join","$f1b5ea32af53b705$export$1385a8623dbdd01b","films","map","param","poster_path","title","release_date","concat","slice","forEach","c","insertAdjacentHTML","Object","defineProperty","$665014edacbfe17b$exports","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$cecbdd76f2d3d4bd$var$storage","FilmsStorage","this","_watchedFilmsList","_queueFilmsList","refreshData","refreshDataQueue","item","saveWatchedFilms","saveQueueFilms","setItem","stringify","getWathedFilmsList","addEventListener","innerHTML","getQueueFilmsList"],"version":3,"file":"library.7b7cce4e.js.map"}