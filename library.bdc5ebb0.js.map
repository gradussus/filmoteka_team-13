{"mappings":"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","sources":["src/library.js"],"sourcesContent":["// Федір, твори магію)\nimport './js/onClickBtnActions';\nimport { refs } from './js/refs';\nimport { renderFilmsLibrary } from './js/renderMarkup';\nimport FilmsStorage from './js/watched-queue';\nimport { getGenres } from './js/renderMarkup';\nimport { setImgInLib, removeImgInLib } from './js/renderMarkup';\nimport { createTrailerLink } from './js/trailers';\n//\n\nconst storage = new FilmsStorage();\nconst movieDescription = document.querySelector('.modal__wrap');\nrefs.closeModalBtnForOneMovie.addEventListener('click', onCloseModal);\nrefs.libGallery.addEventListener('click', onOpenModal);\n\n//\nlet addToWatchedBtn;\n\nlet addToQueueBtn;\nlet removeFromWatchedBtn;\nlet removeFromQueueBtn;\nlet currentFilm = {};\n\nrenderFilmsLibrary(storage.getWathedFilmsList());\n\nconst queueBtn = document.querySelector('.queue-button');\nconst wachedBtn = document.querySelector('.watched-button');\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nwachedBtn.addEventListener('click', onWachedBtnClick);\n\nfunction onQueueBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getQueueFilmsList());\n\n  queueBtn.style.backgroundColor = '#ff6b01';\n  queueBtn.style.border = 'none';\n  wachedBtn.style.backgroundColor = 'transparent';\n  wachedBtn.style.border = '1px solid white';\n\n  wachedBtn.classList.remove('currentbtn');\n  queueBtn.classList.add('currentbtn');\n  // console.log(storage.getQueueFilmsList().length || undefined);\n  if (queueBtn.classList.contains('currentbtn')) {\n    if (\n      storage.getQueueFilmsList() === undefined ||\n      !storage.getQueueFilmsList().length\n    ) {\n      setImgInLib();\n    } else {\n      removeImgInLib();\n    }\n  }\n}\nfunction onWachedBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getWathedFilmsList());\n\n  queueBtn.style.backgroundColor = 'transparent';\n  queueBtn.style.border = '1px solid white';\n  wachedBtn.style.backgroundColor = '#ff6b01';\n  wachedBtn.style.border = 'none';\n\n  queueBtn.classList.remove('currentbtn');\n  wachedBtn.classList.add('currentbtn');\n  // console.log(storage.getWathedFilmsList().length || undefined);\n  if (wachedBtn.classList.contains('currentbtn')) {\n    if (\n      storage.getWathedFilmsList() === undefined ||\n      !storage.getWathedFilmsList().length\n    ) {\n      setImgInLib();\n    } else {\n      removeImgInLib();\n    }\n  }\n}\n\nfunction onEscapeClick(event) {\n  if (event.code == 'Escape') {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.target == refs.backdropOneMovie) {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\n// findFilmFunc\nfunction findCurrentFilm(id) {\n  let filmsSet = [];\n  if (wachedBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('watched-films'));\n  }\n  if (queueBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('queue-films'));\n  }\n\n  currentFilm = filmsSet.find(film => film.id === id);\n  return currentFilm;\n}\n// missclick\nfunction checkClick(e) {\n  const element = e.target.nodeName;\n  const emptyIMG = e.target;\n  if (emptyIMG.getAttribute('alt') === 'plug') {\n    return false;\n  }\n\n  if (\n    element === 'DIV' ||\n    element === 'IMG' ||\n    element === 'P' ||\n    element === 'SPAN'\n  ) {\n    return true;\n  }\n  return false;\n}\n\nfunction onOpenModal(e) {\n  if (!checkClick(e)) {\n    return;\n  }\n\n  refs.backdropOneMovie.classList.remove('is-hidden');\n  document.body.classList.add('modal-open');\n\n  const idFilm = Number(e.target.id);\n\n  const curentObject = findCurrentFilm(idFilm);\n\n  renderOneMovieForModal(curentObject);\n\n  //\n\n  addToWatchedBtn = document.querySelector('.btn__modal-add');\n  addToQueueBtn = document.querySelector('.btn__modal-queue');\n  removeFromQueueBtn = document.querySelector('.btn__modal-r-queue');\n  removeFromWatchedBtn = document.querySelector('.btn__modal-r-watched');\n\n  addToWatchedBtn.addEventListener('click', addToWatchedLS);\n  removeFromWatchedBtn.addEventListener('click', removeFromWatchedLS);\n  addToQueueBtn.addEventListener('click', addToQueueLS);\n  removeFromQueueBtn.addEventListener('click', removeFromQueueLS);\n  // trailer\n  const trailerBtn = document.querySelector('.play-trailer');\n  trailerBtn.addEventListener('click', createTrailerLink);\n\n  document.addEventListener('keydown', onEscapeClick);\n  document.addEventListener('click', onBackdropClick);\n\n  if (storage.checkFilmInWatchedLocStor(curentObject)) {\n    addToWatchedBtn.classList.add('is-hidden');\n    removeFromWatchedBtn.classList.remove('is-hidden');\n  }\n  if (storage.checkFilmInQueueLocStor(curentObject)) {\n    addToQueueBtn.classList.add('is-hidden');\n    removeFromQueueBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction onCloseModal() {\n  refs.backdropOneMovie.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n\n  document.removeEventListener('keydown', onEscapeClick);\n  document.removeEventListener('click', onBackdropClick);\n}\n\nfunction renderOneMovieForModal({\n  genre_ids,\n  poster_path,\n  original_title,\n  overview,\n  popularity,\n  title,\n  vote_average,\n  vote_count,\n  id,\n}) {\n  movieDescription.innerHTML = '';\n  const poster = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : `https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg`;\n  return (movieDescription.innerHTML = `\n  <div class=\"image__wrap\">\n    <img class=\"image\" src=\"https://image.tmdb.org/t/p/original${poster}\" alt=\"${\n    title || 'No title'\n  }\" />\n  </div>\n  <div class=\"description__wrap\">\n    <h1 class=\"description__title\">${title || 'No title'}</h1>\n    <table>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Vote / Votes</td>\n        <td class=\"description__table-result\">\n          <span class=\"votes\">${vote_average.toFixed(1) || 'No data'}</span> /${\n    vote_count || 'No data'\n  }\n        </td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Popularity</td>\n        <td class=\"description__table-result\">${\n          popularity.toFixed(1) || 'No data'\n        }</td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Original Title</td>\n        <td class=\"description__table-result\">${\n          original_title || 'No original title'\n        }</td>\n      </tr>\n\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Genre</td>\n        <td class=\"description__table-result\">${\n          getGenres(genre_ids, 100) || 'No genres info'\n        }</td>\n      </tr>\n    </table>\n    <p class=\"descrption__about\">ABOUT</p>\n    <p class=\"description__text\">\n     ${overview || 'There is no imformation about this movie'}\n    </p>\n    <ul class=\"btn__wrap\">\n      <li>\n        <button class=\"btn btn__modal-add\">add to Watched</button>\n        <button class=\"btn btn__modal-r-watched is-hidden\">remove from Watched</button>\n      </li>\n      <li>\n        <button class=\"btn btn__modal-queue\">add to queue</button>\n        <button class=\"btn btn__modal-r-queue is-hidden\">remove from queue</button>\n      </li>\n    </ul>\n    <div class=\"btn__wrap\">\n    <button class=\"btn play-trailer\" id=\"${id}\">Watch Trailer</button>\n    </div>\n  </div>\n`);\n}\n\n//функціонал для ЛС\nfunction addToWatchedLS() {\n  storage.refreshData();\n\n  storage.addToWatchedFilms(currentFilm);\n  storage.saveWatchedFilms();\n\n  //\n\n  addToWatchedBtn.classList.add('is-hidden');\n  removeFromWatchedBtn.classList.remove('is-hidden');\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    if (storage.getWathedFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n}\n\nfunction removeFromWatchedLS() {\n  addToWatchedBtn.classList.remove('is-hidden');\n  removeFromWatchedBtn.classList.add('is-hidden');\n\n  storage.removeFromWatched(currentFilm);\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getWathedFilmsList().length === 0) {\n    setImgInLib();\n  }\n}\n// uquqee\n\nfunction addToQueueLS() {\n  storage.myAddToQueueFilms(currentFilm);\n\n  addToQueueBtn.classList.add('is-hidden');\n  removeFromQueueBtn.classList.remove('is-hidden');\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    if (storage.getQueueFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n}\n\nfunction removeFromQueueLS() {\n  addToQueueBtn.classList.remove('is-hidden');\n  removeFromQueueBtn.classList.add('is-hidden');\n\n  storage.removeFromQueue(currentFilm);\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getQueueFilmsList().length === 0) {\n    setImgInLib();\n  }\n}\n\nfunction removeFromDomElement() {\n  const el = document.getElementById(currentFilm.id);\n  el.remove();\n}\nfunction addToDOMelement() {\n  renderFilmsLibrary([currentFilm]);\n}\n"],"names":["parcelRequire","$cecbdd76f2d3d4bd$var$addToWatchedBtn","$cecbdd76f2d3d4bd$var$addToQueueBtn","$cecbdd76f2d3d4bd$var$removeFromWatchedBtn","$cecbdd76f2d3d4bd$var$removeFromQueueBtn","$cecbdd76f2d3d4bd$var$storage","$lWBva","default","$cecbdd76f2d3d4bd$var$movieDescription","document","querySelector","$4Nugj","refs","closeModalBtnForOneMovie","addEventListener","backdropOneMovie","classList","add","body","remove","removeEventListener","$cecbdd76f2d3d4bd$var$onEscapeClick","$cecbdd76f2d3d4bd$var$onBackdropClick","libGallery","e","element","target","nodeName","getAttribute","$cecbdd76f2d3d4bd$var$checkClick","curentObject","id","filmsSet","$cecbdd76f2d3d4bd$var$wachedBtn","contains","JSON","parse","localStorage","getItem","$cecbdd76f2d3d4bd$var$queueBtn","$cecbdd76f2d3d4bd$var$currentFilm","find","film","$cecbdd76f2d3d4bd$var$findCurrentFilm","Number","param","genre_ids","poster_path","original_title","overview","popularity","title","vote_average","vote_count","innerHTML","poster","concat","toFixed","$5118m","getGenres","$cecbdd76f2d3d4bd$var$renderOneMovieForModal","$cecbdd76f2d3d4bd$var$addToWatchedLS","$cecbdd76f2d3d4bd$var$removeFromWatchedLS","$cecbdd76f2d3d4bd$var$addToQueueLS","$cecbdd76f2d3d4bd$var$removeFromQueueLS","$axifr","createTrailerLink","checkFilmInWatchedLocStor","checkFilmInQueueLocStor","renderFilmsLibrary","getWathedFilmsList","event","code","refreshData","addToWatchedFilms","saveWatchedFilms","length","$cecbdd76f2d3d4bd$var$addToDOMelement","removeFromWatched","$cecbdd76f2d3d4bd$var$removeFromDomElement","setImgInLib","myAddToQueueFilms","getQueueFilmsList","removeFromQueue","getElementById","style","backgroundColor","border","undefined","removeImgInLib"],"version":3,"file":"library.bdc5ebb0.js.map"}