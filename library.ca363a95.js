const e={backdrop:document.querySelector(".backdrop"),teamLink:document.querySelector(".js-team"),spinerBackdrop:document.querySelector(".spiner__backdrop"),filmsListRef:document.querySelector(".films"),gallery:document.querySelector(".gallery__set"),libGallery:document.querySelector(".lib-gallery__set"),container:document.getElementById("pagination"),galleryGenreItem:document.querySelector(".film__genres"),form:document.querySelector(".header-film__form"),closeModalBtnForOneMovie:document.querySelector(".modal__button"),modalForOneMovie:document.querySelector(".modal"),backdropOneMovie:document.querySelector(".backdrop"),btnAddToWatched:document.querySelector(".btn__modal-add"),btnRemoveFromWatched:document.querySelector(".btn__modal-r-watched"),btnAddToQuene:document.querySelector(".btn__modal-queue"),btnRemoveFromQuene:document.querySelector(".btn__modal-r-queue")};function t(e,t){const s=JSON.parse(localStorage.getItem("genres")),i=[];for(let l=0;l<t&&l<e.length;l++)for(const t of s)e[l]===t.id&&i.push(t.name);return 0===i.length?"No genres info":(e.length>t&&i.push("Other"),i.join(", "))}function s(s){s.map((({poster_path:e,genre_ids:s,title:i,release_date:l,id:a})=>`<li class="films__item" data-id=${a||"No ID"}>\n                <div class="films__img">\n                    <img src=https://image.tmdb.org/t/p/original${e?`https://image.tmdb.org/t/p/w500${e}`:"https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg"} alt="${i||"No title"}" loading="lazy">\n                </div>\n                <div class="films__description">\n                  <p class="films__title">${i||"No title"}</p>\n                  <div class="films__meta">\n                    <span class="films__genres">${t(s,3)||"No genres info"}</span>\n                    <span class="films__sep">|</span>\n                    <span class="films__data">${new Date(l).getFullYear()||"No info"}</span>\n                  </div>\n                </div>\n            </li>`)).forEach((t=>e.libGallery.insertAdjacentHTML("beforeend",t)))}const i=new class{refreshData(){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films")))}refreshDataQueue(){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films")))}addToWatchedFilms(e){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"))),this._watchedFilmsList.push(e),this.saveWatchedFilms()}myAddToQueueFilms(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}addToQueueFilms(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),this.saveQueueFilms()}saveWatchedFilms(){localStorage.setItem("watched-films",JSON.stringify(this._watchedFilmsList))}saveQueueFilms(){localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}getWathedFilmsList(){if(localStorage.getItem("watched-films"))return JSON.parse(localStorage.getItem("watched-films"))}getQueueFilmsList(){if(localStorage.getItem("queue-films"))return JSON.parse(localStorage.getItem("queue-films"))}removeFromWatched(e){if(!localStorage.getItem("watched-films"))return;this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"));const t=this._watchedFilmsList.findIndex((t=>t.title===e.title));this._watchedFilmsList.splice(t,1),this.saveWatchedFilms()}removeFromQueue(e){if(!localStorage.getItem("queue-films"))return;this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"));const t=this._queueFilmsList.findIndex((t=>t.title===e.title));this._queueFilmsList.splice(t,1),this.saveQueueFilms()}checkFilmInWatchedLocStor(e){if(!localStorage.getItem("watched-films"))return;this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"));return!!this._watchedFilmsList.find((t=>t.title===e.title))}checkFilmInQueueLocStor(e){if(!localStorage.getItem("queue-films"))return;this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"));return!!this._queueFilmsList.find((t=>t.title===e.title))}constructor(){this._watchedFilmsList=[],this._queueFilmsList=[],this.refreshData(),this.refreshDataQueue()}},l=document.querySelector(".modal__wrap");let a,o,n,r;e.closeModalBtnForOneMovie.addEventListener("click",(function(){e.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",u),document.removeEventListener("click",h)})),e.libGallery.addEventListener("click",(function(s){if(!function(e){const t=e.target.nodeName;return"DIV"===t||"IMG"===t||"P"===t||"SPAN"===t}(s))return;e.backdropOneMovie.classList.remove("is-hidden"),document.body.classList.add("modal-open");const c=function(e){const t=_();return d=t.find((t=>t.original_title===e)),d}(s.target.alt);(function({genre_ids:e,poster_path:s,original_title:i,overview:a,popularity:o,title:n,vote_average:r,vote_count:d}){l.innerHTML="";const c=s?`https://image.tmdb.org/t/p/w500${s}`:"https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg";l.innerHTML=`\n  <div class="image__wrap">\n    <img class="image" src="https://image.tmdb.org/t/p/original${c}" alt="${n||"No title"}" />\n  </div>\n  <div class="description__wrap">\n    <h1 class="description__title">${n||"No title"}</h1>\n    <table>\n      <tr class="table__wrap">\n        <td class="description__table">Vote / Votes</td>\n        <td class="description__table-result">\n          <span class="votes">${r.toFixed(1)||"No data"}</span> /${d||"No data"}\n        </td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Popularity</td>\n        <td class="description__table-result">${o.toFixed(1)||"No data"}</td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Original Title</td>\n        <td class="description__table-result">${i||"No original title"}</td>\n      </tr>\n\n      <tr class="table__wrap">\n        <td class="description__table">Genre</td>\n        <td class="description__table-result">${t(e,100)||"No genres info"}</td>\n      </tr>\n    </table>\n    <p class="descrption__about">ABOUT</p>\n    <p class="description__text">\n     ${a||"There is no imformation about this movie"}\n    </p>\n    <ul class="btn__wrap">\n      <li>\n        <button class="btn btn__modal-add">add to Watched</button>\n        <button class="btn btn__modal-r-watched is-hidden">remove from Watched</button>\n      </li>\n      <li>\n        <button class="btn btn__modal-queue">add to queue</button>\n        <button class="btn btn__modal-r-queue is-hidden">remove from queue</button>\n      </li>\n    </ul>\n  </div>\n`})(c),a=document.querySelector(".btn__modal-add"),o=document.querySelector(".btn__modal-queue"),r=document.querySelector(".btn__modal-r-queue"),n=document.querySelector(".btn__modal-r-watched"),a.addEventListener("click",g),n.addEventListener("click",p),o.addEventListener("click",f),r.addEventListener("click",b),document.addEventListener("keydown",u),document.addEventListener("click",h),i.checkFilmInWatchedLocStor(c)&&(a.classList.add("is-hidden"),n.classList.remove("is-hidden"));i.checkFilmInQueueLocStor(c)&&(o.classList.add("is-hidden"),r.classList.remove("is-hidden"))}));let d={};s(i.getWathedFilmsList());const c=document.querySelector(".queue-button"),m=document.querySelector(".watched-button");function u(t){"Escape"==t.code&&(e.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function h(t){t.target==e.backdropOneMovie&&(e.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function _(){return JSON.parse(localStorage.getItem("currentFilms"))}function g(){i.refreshData(),i.addToWatchedFilms(d),i.saveWatchedFilms(),a.classList.add("is-hidden"),n.classList.remove("is-hidden"),e.libGallery.innerHTML="",s(i.getWathedFilmsList())}function p(){a.classList.remove("is-hidden"),n.classList.add("is-hidden"),i.removeFromWatched(d),L(d)}function f(){i.myAddToQueueFilms(d),o.classList.add("is-hidden"),r.classList.remove("is-hidden"),e.libGallery.innerHTML="",s(i.getQueueFilmsList())}function b(){o.classList.remove("is-hidden"),r.classList.add("is-hidden"),i.removeFromQueue(d),L(d)}function L(e){document.getElementById(e.id).remove()}c.addEventListener("click",(function(){e.libGallery.innerHTML="",s(i.getQueueFilmsList()),m.style.backgroundColor="transparent",m.style.border="1px solid white"})),m.addEventListener("click",(function(){e.libGallery.innerHTML="",s(i.getWathedFilmsList()),m.style.backgroundColor="#ff6b08",m.style.border="none"})),_();
//# sourceMappingURL=library.ca363a95.js.map
