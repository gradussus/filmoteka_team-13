function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var s={id:e,exports:{}};return r[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequired7c6=s),s.register("krGWQ",(function(t,r){e(t.exports,"refs",(function(){return o}));const o={backdrop:document.querySelector(".backdrop"),teamLink:document.querySelector(".js-team"),spinerBackdrop:document.querySelector(".spiner__backdrop"),filmsListRef:document.querySelector(".films"),gallery:document.querySelector(".gallery__set"),libGallery:document.querySelector(".lib-gallery__set"),container:document.getElementById("pagination"),galleryGenreItem:document.querySelector(".film__genres"),form:document.querySelector(".header-film__form"),closeModalBtnForOneMovie:document.querySelector(".modal__button"),modalForOneMovie:document.querySelector(".modal"),backdropOneMovie:document.querySelector(".backdrop"),btnAddToWatched:document.querySelector(".btn__modal-add"),btnRemoveFromWatched:document.querySelector(".btn__modal-r-watched"),btnAddToQuene:document.querySelector(".btn__modal-queue"),btnRemoveFromQuene:document.querySelector(".btn__modal-r-queue"),trailerBackdrop:document.querySelector(".js-backdrop-trailer"),checkBox:document.querySelector(".checkbox"),main:document.querySelector("main"),footer:document.querySelector("footer"),footerText:document.querySelector(".footer__txt"),footerTextP:document.querySelector(".footer__txt-p"),footerTextBtn:document.querySelector(".footer__txt-btn"),footerTextPP:document.querySelector(".footer__txt-p-p"),btnScroll:document.querySelector(".scroll-btn"),globalInputValue:""}})),s.register("cky31",(function(t,r){e(t.exports,"renderFilmsMarkup",(function(){return l})),e(t.exports,"getGenres",(function(){return a})),e(t.exports,"renderFilmsLibrary",(function(){return n})),e(t.exports,"setImgInLib",(function(){return c})),e(t.exports,"removeImgInLib",(function(){return d}));var o=s("krGWQ"),i=s("4S0r6");function l(e){e.map((({poster_path:e,genre_ids:t,title:r,name:o,release_date:s,first_air_date:i,id:l})=>`<li class="films__item" data-id=${l||"No ID"}>\n                <div class="films__img">\n                    <img src=https://image.tmdb.org/t/p/original${e?`https://image.tmdb.org/t/p/w400${e}`:"https://image.tmdb.org/t/p/w400/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg"} alt="${r||o||"No title"}" loading="lazy" id=${l}>\n                </div>\n                <div class="films__description" id=${l}>\n                  <p class="films__title" id=${l}>${r||o||"No title"}</p>\n                  <div class="films__meta" id=${l}>\n                    <span class="films__genres" id=${l}>${a(t,3)||"No genres info"}</span>\n                    <span class="films__sep" id=${l}>|</span>\n                    <span class="films__data" id=${l}>${new Date(s).getFullYear()||new Date(i).getFullYear()||"No info"}</span>\n                  </div>\n                </div>\n            </li>`)).forEach((e=>o.refs.gallery.insertAdjacentHTML("beforeend",e)))}function a(e,t){const r=JSON.parse(localStorage.getItem("genres")),o=[];for(let s=0;s<t&&s<e.length;s++)for(const t of r)e[s]===t.id&&o.push(t.name);return e.length>t&&o.splice(t-1,1,"Other"),o.join(", ")}function n(e){if((0,i.loadTheme)(),e)return e.length?void e.map((({poster_path:e,genre_ids:t,title:r,name:o,release_date:s,first_air_date:i,id:l})=>`<li class="films__item" id=${l||"No ID"}>\n                <div class="films__img">\n                    <img src=https://image.tmdb.org/t/p/original${e?`https://image.tmdb.org/t/p/w400${e}`:"https://image.tmdb.org/t/p/w400/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg"} alt="${r||o||"No title"}" loading="lazy" id=${l}>\n                </div>\n                <div class="films__description" id=${l}>\n                  <p class="films__title" id=${l}>${r||o||"No title"}</p>\n                  <div class="films__meta" id=${l}>\n                    <span class="films__genres" id=${l}>${a(t,3)||"No genres info"}</span>\n                    <span class="films__sep" id=${l}>|</span>\n                    <span class="films__data" id=${l}>${new Date(s).getFullYear()||new Date(i).getFullYear()||"No info"}</span>\n                  </div>\n                </div>\n            </li>`)).forEach((e=>o.refs.libGallery.insertAdjacentHTML("beforeend",e))):void c();c()}function c(){document.getElementById("plug").classList.remove("visually-hidden")}function d(){document.getElementById("plug").classList.add("visually-hidden")}})),s.register("4S0r6",(function(t,r){e(t.exports,"loadTheme",(function(){return i}));var o=s("krGWQ");function i(){o.refs.checkBox.checked=JSON.parse(localStorage.getItem("dark-theme")),o.refs.checkBox.checked&&(o.refs.main.style.backgroundColor="#272e34",o.refs.modalForOneMovie.style.backgroundColor="#272e34",o.refs.footer.style.backgroundColor="rgb(89, 84, 84)",o.refs.footerText.classList.add("dark"),o.refs.footerTextBtn.classList.add("dark"),o.refs.footerTextP.classList.add("dark"),o.refs.footerTextPP.classList.add("dark")),o.refs.checkBox.checked||(o.refs.main.style.backgroundColor="#fff",o.refs.modalForOneMovie.style.backgroundColor="#fff",o.refs.footer.style.backgroundColor="rgb(247, 247, 247)",o.refs.footerText.classList.remove("dark"),o.refs.footerTextBtn.classList.remove("dark"),o.refs.footerTextP.classList.remove("dark"),o.refs.footerTextPP.classList.remove("dark"))}o.refs.checkBox.addEventListener("input",(function(){(function(){if(o.refs.checkBox.checked){document.querySelectorAll(".tui-page-btn").forEach((e=>e.classList.add("tui-dark")))}if(!o.refs.checkBox.checked){document.querySelectorAll(".tui-page-btn").forEach((e=>e.classList.remove("tui-dark")))}})(),localStorage.setItem("dark-theme",JSON.stringify(o.refs.checkBox.checked)),o.refs.checkBox.checked&&(o.refs.main.style.backgroundColor="#272e34",o.refs.modalForOneMovie.style.backgroundColor="#272e34",o.refs.footer.style.backgroundColor="rgb(89, 84, 84)",o.refs.footerText.classList.add("dark"),o.refs.footerTextBtn.classList.add("dark"),o.refs.footerTextP.classList.add("dark"),o.refs.footerTextPP.classList.add("dark"));o.refs.checkBox.checked||(o.refs.main.style.backgroundColor="#fff",o.refs.modalForOneMovie.style.backgroundColor="#fff",o.refs.footer.style.backgroundColor="rgb(247, 247, 247)",o.refs.footerText.classList.remove("dark"),o.refs.footerTextBtn.classList.remove("dark"),o.refs.footerTextP.classList.remove("dark"),o.refs.footerTextPP.classList.remove("dark"))}))})),s.register("jew7v",(function(t,r){e(t.exports,"default",(function(){return o}));class o{refreshData(){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films")))}refreshDataQueue(){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films")))}addToWatchedFilms(e){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"))),this._watchedFilmsList.push(e),this.saveWatchedFilms()}myAddToQueueFilms(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}addToQueueFilms(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),this.saveQueueFilms()}saveWatchedFilms(){localStorage.setItem("watched-films",JSON.stringify(this._watchedFilmsList))}saveQueueFilms(){localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}getWathedFilmsList(){if(localStorage.getItem("watched-films"))return JSON.parse(localStorage.getItem("watched-films"))}getQueueFilmsList(){if(localStorage.getItem("queue-films"))return JSON.parse(localStorage.getItem("queue-films"))}removeFromWatched(e){if(!localStorage.getItem("watched-films"))return;this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"));const t=this._watchedFilmsList.findIndex((t=>t.title===e.title));this._watchedFilmsList.splice(t,1),this.saveWatchedFilms()}removeFromQueue(e){if(!localStorage.getItem("queue-films"))return;this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"));const t=this._queueFilmsList.findIndex((t=>t.title===e.title));this._queueFilmsList.splice(t,1),this.saveQueueFilms()}checkFilmInWatchedLocStor(e){if(!localStorage.getItem("watched-films"))return;this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"));return!!this._watchedFilmsList.find((t=>t.title===e.title))}checkFilmInQueueLocStor(e){if(!localStorage.getItem("queue-films"))return;this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"));return!!this._queueFilmsList.find((t=>t.title===e.title))}constructor(){this._watchedFilmsList=[],this._queueFilmsList=[],this.refreshData(),this.refreshDataQueue()}}})),s.register("lUanL",(function(t,r){e(t.exports,"createTrailerLink",(function(){return n}));var o=s("krGWQ"),i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";var l=document.getElementsByTagName("script")[0];let a;async function n(){const e=document.querySelector(".play-trailer").id,t=await async function(e){try{const t=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=5d44c33850258a6ea050e461474b1468&language=en-US`);if(t.ok)return await t.json()}catch(e){console.log("error")}}(e);if(o.refs.trailerBackdrop.classList.remove("is-hidden"),0===t.results.length)return void console.log("Нет в БД трейлера к этому фильму. Нам очень жаль.");let r=t.results.find((e=>"Trailer"===e.type&&"YouTube"===e.site));var s;s=r.key,a=new YT.Player("player",{height:"360",width:"640",videoId:s,playerVars:{autoplay:1,controls:1,rel:0},events:{onReady:c,onStateChange:d}})}function c(e){e.target.playVideo()}function d(e){}function u(){a.stopVideo()}l.parentNode.insertBefore(i,l),o.refs.trailerBackdrop.addEventListener("click",(e=>{e.currentTarget.classList.toggle("is-hidden"),o.refs.trailerBackdrop.innerHTML="",o.refs.trailerBackdrop.innerHTML='<div class="modal__trailer" id="player"></div>',u()}))})),s.register("bb26h",(function(e,t){const r={modal:document.querySelector("[data-modal-footer]"),closeBtn:document.querySelector(".footer-modal__closeBtn"),openFooterModalBtn:document.querySelector(".js-team"),btnScroll:document.querySelector(".scroll-btn")};function o(e){"Escape"===e.code&&(r.modal.classList.add("is-hidden"),document.removeEventListener("keydown",o),document.removeEventListener("click",s))}function s(e){e.target===r.modal&&(r.modal.classList.add("is-hidden"),document.removeEventListener("click",s),document.removeEventListener("keydown",o))}r.openFooterModalBtn.addEventListener("click",(e=>{e.preventDefault(),r.btnScroll.style.display="none",r.modal.classList.remove("is-hidden"),document.addEventListener("keydown",o),document.addEventListener("click",s)})),r.closeBtn.addEventListener("click",(e=>{e.preventDefault(),r.modal.classList.add("is-hidden"),document.removeEventListener("keydown",o),document.removeEventListener("click",s)}))})),s.register("bWjuf",(function(e,t){const r=document.querySelector(".scroll-btn");window.onscroll=function(){document.body.scrollTop>30||document.documentElement.scrollTop>30?r.style.display="flex":r.style.display="none"}}));
//# sourceMappingURL=index.d890a607.js.map
