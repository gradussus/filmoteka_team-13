const e={backdrop:document.querySelector(".backdrop"),teamLink:document.querySelector(".js-team"),spinerBackdrop:document.querySelector(".spiner__backdrop"),filmsListRef:document.querySelector(".films"),gallery:document.querySelector(".gallery__set"),libGallery:document.querySelector(".lib-gallery__set"),container:document.getElementById("pagination"),galleryGenreItem:document.querySelector(".film__genres"),form:document.querySelector(".header-film__form"),closeModalBtnForOneMovie:document.querySelector(".modal__button"),modalForOneMovie:document.querySelector(".modal"),backdropOneMovie:document.querySelector(".backdrop"),btnAddToWatched:document.querySelector(".btn__modal-add"),btnRemoveFromWatched:document.querySelector(".btn__modal-r-watched"),btnAddToQuene:document.querySelector(".btn__modal-queue"),btnRemoveFromQuene:document.querySelector(".btn__modal-r-queue")};function t(e,t){const s=JSON.parse(localStorage.getItem("genres")),i=[];for(let l=0;l<t&&l<e.length;l++)for(const t of s)e[l]===t.id&&i.push(t.name);return 0===i.length?"No genres info":(e.length>t&&i.push("Other"),i.join(", "))}function s(s){s.map((({poster_path:e,genre_ids:s,title:i,release_date:l,id:a})=>`<li class="films__item" id=${a}>\n                <div class="films__img">\n                    <img src=https://image.tmdb.org/t/p/original${e} alt="${i}" loading="lazy">\n                </div>\n                <div class="films__description">\n                  <p class="films__title">${i}</p>\n                  <div class="films__meta">\n                    <span class="films__genres">${t(s)}</span>\n                    <span class="films__sep">|</span>\n                    <span class="films__data">${l.slice(0,4)||"No year info"}</span>\n                  </div>\n                </div>\n            </li>`)).forEach((t=>e.libGallery.insertAdjacentHTML("beforeend",t)))}const i=new class{refreshData(){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films")))}refreshDataQueue(){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films")))}addToWatchedFilms(e){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"))),this._watchedFilmsList.push(e),this.saveWatchedFilms()}myAddToQueueFilms(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}addToQueueFilms(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),this.saveQueueFilms()}saveWatchedFilms(){localStorage.setItem("watched-films",JSON.stringify(this._watchedFilmsList))}saveQueueFilms(){localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}getWathedFilmsList(){if(localStorage.getItem("watched-films"))return JSON.parse(localStorage.getItem("watched-films"))}getQueueFilmsList(){if(localStorage.getItem("queue-films"))return JSON.parse(localStorage.getItem("queue-films"))}removeFromWatched(e){if(!localStorage.getItem("watched-films"))return;this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"));const t=this._watchedFilmsList.findIndex((t=>t.title===e.title));this._watchedFilmsList.splice(t,1),this.saveWatchedFilms()}removeFromQueue(e){if(!localStorage.getItem("queue-films"))return;this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"));const t=this._queueFilmsList.findIndex((t=>t.title===e.title));this._queueFilmsList.splice(t,1),this.saveQueueFilms()}checkFilmInWatchedLocStor(e){if(!localStorage.getItem("watched-films"))return;this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"));return!!this._watchedFilmsList.find((t=>t.title===e.title))}checkFilmInQueueLocStor(e){if(!localStorage.getItem("queue-films"))return;this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"));return!!this._queueFilmsList.find((t=>t.title===e.title))}constructor(){this._watchedFilmsList=[],this._queueFilmsList=[],this.refreshData(),this.refreshDataQueue()}},l=document.querySelector(".modal__wrap");let a,n,o,r;e.closeModalBtnForOneMovie.addEventListener("click",(function(){e.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",m),document.removeEventListener("click",_)})),e.libGallery.addEventListener("click",(function(s){if(!function(e){const t=e.target.nodeName;return"DIV"===t||"IMG"===t||"P"===t||"SPAN"===t}(s))return;e.backdropOneMovie.classList.remove("is-hidden"),document.body.classList.add("modal-open");const c=function(e){const t=h();return d=t.find((t=>t.original_title===e)),d}(s.target.alt);(function({genre_ids:e,poster_path:s,original_title:i,overview:a,popularity:n,title:o,vote_average:r,vote_count:d}){l.innerHTML="",l.innerHTML=`\n  <div class="image__wrap">\n    <img class="image" src="https://image.tmdb.org/t/p/original${s}" alt="${o}" />\n  </div>\n  <div class="description__wrap">\n    <h1 class="description__title">${o}</h1>\n    <table>\n      <tr class="table__wrap">\n        <td class="description__table">Vote / Votes</td>\n        <td class="description__table-result">\n          <span class="votes">${r.toFixed(1)}</span> /${d}\n        </td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Popularity</td>\n        <td class="description__table-result">${n.toFixed(1)}</td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Original Title</td>\n        <td class="description__table-result">${i}</td>\n      </tr>\n\n      <tr class="table__wrap">\n        <td class="description__table">Genre</td>\n        <td class="description__table-result">${t(e,100)}</td>\n      </tr>\n    </table>\n    <p class="descrption__about">ABOUT</p>\n    <p class="description__text">\n     ${a||"There is no imformation about this movie"}\n    </p>\n    <ul class="btn__wrap">\n      <li>\n        <button class="btn btn__modal-add">add to Watched</button>\n        <button class="btn btn__modal-r-watched is-hidden">remove from Watched</button>\n      </li>\n      <li>\n        <button class="btn btn__modal-queue">add to queue</button>\n        <button class="btn btn__modal-r-queue is-hidden">remove from queue</button>\n      </li>\n    </ul>\n  </div>\n`})(c),a=document.querySelector(".btn__modal-add"),n=document.querySelector(".btn__modal-queue"),r=document.querySelector(".btn__modal-r-queue"),o=document.querySelector(".btn__modal-r-watched"),a.addEventListener("click",g),o.addEventListener("click",f),n.addEventListener("click",p),r.addEventListener("click",b),document.addEventListener("keydown",m),document.addEventListener("click",_),i.checkFilmInWatchedLocStor(c)&&(a.classList.add("is-hidden"),o.classList.remove("is-hidden"));i.checkFilmInQueueLocStor(c)&&(n.classList.add("is-hidden"),r.classList.remove("is-hidden"))}));let d={};s(i.getWathedFilmsList());const c=document.querySelector(".queue-button"),u=document.querySelector(".watched-button");function m(t){"Escape"==t.code&&(e.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function _(t){t.target==e.backdropOneMovie&&(e.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function h(){return JSON.parse(localStorage.getItem("currentFilms"))}function g(){i.refreshData(),i.addToWatchedFilms(d),i.saveWatchedFilms(),a.classList.add("is-hidden"),o.classList.remove("is-hidden"),e.libGallery.innerHTML="",s(i.getWathedFilmsList())}function f(){a.classList.remove("is-hidden"),o.classList.add("is-hidden"),i.removeFromWatched(d),L(d)}function p(){i.myAddToQueueFilms(d),n.classList.add("is-hidden"),r.classList.remove("is-hidden"),e.libGallery.innerHTML="",s(i.getQueueFilmsList())}function b(){n.classList.remove("is-hidden"),r.classList.add("is-hidden"),i.removeFromQueue(d),L(d)}function L(e){document.getElementById(e.id).remove()}c.addEventListener("click",(function(){e.libGallery.innerHTML="",s(i.getQueueFilmsList()),u.style.backgroundColor="transparent",u.style.border="1px solid white"})),u.addEventListener("click",(function(){e.libGallery.innerHTML="",s(i.getWathedFilmsList()),u.style.backgroundColor="#ff6b08",u.style.border="none"})),h();
//# sourceMappingURL=library.9ea73984.js.map
