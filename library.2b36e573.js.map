{"mappings":"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","sources":["src/library.js"],"sourcesContent":["// Федір, твори магію)\n\nimport { refs } from './js/refs';\nimport { renderFilmsLibrary } from './js/voprim';\nimport FilmsStorage from './js/watched-queue';\n// import { spinerClose, spinerOpen } from './js/spiner';\nimport { getGenres } from './js/voprim';\nimport { Pagination } from 'tui-pagination';\n\n//\n\nconst storage = new FilmsStorage();\nconst movieDescription = document.querySelector('.modal__wrap');\nrefs.closeModalBtnForOneMovie.addEventListener('click', onCloseModal);\nrefs.libGallery.addEventListener('click', onOpenModal);\n\n//\nlet addToWatchedBtn;\n\nlet addToQueueBtn;\nlet removeFromWatchedBtn;\nlet removeFromQueueBtn;\nlet currentFilm = {};\n//\n\nrenderFilmsLibrary(storage.getWathedFilmsList());\n\nconst queueBtn = document.querySelector('.queue-button');\nconst wachedBtn = document.querySelector('.watched-button');\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nwachedBtn.addEventListener('click', onWachedBtnClick);\n\nfunction onQueueBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getQueueFilmsList());\n\n  queueBtn.style.backgroundColor = '#ff6b01';\n  queueBtn.style.border = 'none';\n  wachedBtn.style.backgroundColor = 'transparent';\n  wachedBtn.style.border = '1px solid white';\n\n  wachedBtn.classList.remove('currentbtn');\n  queueBtn.classList.add('currentbtn');\n}\n// addToQueueBtn.classList.add('is-hidden');\n// removeFromQueueBtn.classList.remove('is-hidden');\nfunction onWachedBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getWathedFilmsList());\n\n  queueBtn.style.backgroundColor = 'transparent';\n  queueBtn.style.border = '1px solid white';\n  wachedBtn.style.backgroundColor = '#ff6b01';\n  wachedBtn.style.border = 'none';\n\n  queueBtn.classList.remove('currentbtn');\n  wachedBtn.classList.add('currentbtn');\n}\n\nfunction onEscapeClick(event) {\n  if (event.code == 'Escape') {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.target == refs.backdropOneMovie) {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\n// findFilmFunc\nfunction findCurrentFilm(name) {\n  const filmsSet = getMoviesToLocalhost();\n  currentFilm = filmsSet.find(option => option.original_title === name);\n  return currentFilm;\n}\n// missclick\nfunction checkClick(e) {\n  const element = e.target.nodeName;\n  if (\n    element === 'DIV' ||\n    element === 'IMG' ||\n    element === 'P' ||\n    element === 'SPAN'\n  ) {\n    return true;\n  }\n  return false;\n}\n\nfunction onOpenModal(e) {\n  if (!checkClick(e)) {\n    return;\n  }\n\n  refs.backdropOneMovie.classList.remove('is-hidden');\n  document.body.classList.add('modal-open');\n\n  const nameFilm = e.target.alt;\n  const curentObject = findCurrentFilm(nameFilm);\n\n  renderOneMovieForModal(curentObject);\n\n  //\n\n  addToWatchedBtn = document.querySelector('.btn__modal-add');\n  addToQueueBtn = document.querySelector('.btn__modal-queue');\n  removeFromQueueBtn = document.querySelector('.btn__modal-r-queue');\n  removeFromWatchedBtn = document.querySelector('.btn__modal-r-watched');\n\n  addToWatchedBtn.addEventListener('click', addToWatchedLS);\n  removeFromWatchedBtn.addEventListener('click', removeFromWatchedLS);\n  addToQueueBtn.addEventListener('click', addToQueueLS);\n  removeFromQueueBtn.addEventListener('click', removeFromQueueLS);\n  //\n\n  document.addEventListener('keydown', onEscapeClick);\n  document.addEventListener('click', onBackdropClick);\n\n  if (storage.checkFilmInWatchedLocStor(curentObject)) {\n    addToWatchedBtn.classList.add('is-hidden');\n    removeFromWatchedBtn.classList.remove('is-hidden');\n  }\n  if (storage.checkFilmInQueueLocStor(curentObject)) {\n    addToQueueBtn.classList.add('is-hidden');\n    removeFromQueueBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction onCloseModal() {\n  refs.backdropOneMovie.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n\n  document.removeEventListener('keydown', onEscapeClick);\n  document.removeEventListener('click', onBackdropClick);\n}\n\nfunction getMoviesToLocalhost() {\n  return JSON.parse(localStorage.getItem('currentFilms'));\n}\ngetMoviesToLocalhost();\n\nfunction renderOneMovieForModal({\n  genre_ids,\n  poster_path,\n  original_title,\n  overview,\n  popularity,\n  title,\n  vote_average,\n  vote_count,\n}) {\n  movieDescription.innerHTML = '';\n  const poster = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : `https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg`;\n  return (movieDescription.innerHTML = `\n  <div class=\"image__wrap\">\n    <img class=\"image\" src=\"https://image.tmdb.org/t/p/original${poster}\" alt=\"${\n    title || 'No title'\n  }\" />\n  </div>\n  <div class=\"description__wrap\">\n    <h1 class=\"description__title\">${title || 'No title'}</h1>\n    <table>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Vote / Votes</td>\n        <td class=\"description__table-result\">\n          <span class=\"votes\">${vote_average.toFixed(1) || 'No data'}</span> /${\n    vote_count || 'No data'\n  }\n        </td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Popularity</td>\n        <td class=\"description__table-result\">${\n          popularity.toFixed(1) || 'No data'\n        }</td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Original Title</td>\n        <td class=\"description__table-result\">${\n          original_title || 'No original title'\n        }</td>\n      </tr>\n\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Genre</td>\n        <td class=\"description__table-result\">${\n          getGenres(genre_ids, 100) || 'No genres info'\n        }</td>\n      </tr>\n    </table>\n    <p class=\"descrption__about\">ABOUT</p>\n    <p class=\"description__text\">\n     ${overview || 'There is no imformation about this movie'}\n    </p>\n    <ul class=\"btn__wrap\">\n      <li>\n        <button class=\"btn btn__modal-add\">add to Watched</button>\n        <button class=\"btn btn__modal-r-watched is-hidden\">remove from Watched</button>\n      </li>\n      <li>\n        <button class=\"btn btn__modal-queue\">add to queue</button>\n        <button class=\"btn btn__modal-r-queue is-hidden\">remove from queue</button>\n      </li>\n    </ul>\n  </div>\n`);\n}\n\n// function renderOneMovieForModal({\n//   genre_ids,\n//   poster_path,\n//   original_title,\n//   overview,\n//   popularity,\n//   title,\n//   vote_average,\n//   vote_count,\n// }) {\n//   movieDescription.innerHTML = '';\n//   return (movieDescription.innerHTML = `\n//   <div class=\"image__wrap\">\n//     <img class=\"image\" src=\"https://image.tmdb.org/t/p/original${poster_path}\" alt=\"${title}\" />\n//   </div>\n//   <div class=\"description__wrap\">\n//     <h1 class=\"description__title\">путин хуйло</h1>\n//     <table>\n//       <tr class=\"table__wrap\">\n//         <td class=\"description__table\">Vote / Votes</td>\n//         <td class=\"description__table-result\">\n//           <span class=\"votes\">${vote_average.toFixed(1)}</span> /${vote_count}\n//         </td>\n//       </tr>\n//       <tr class=\"table__wrap\">\n//         <td class=\"description__table\">Popularity</td>\n//         <td class=\"description__table-result\">${popularity.toFixed(1)}</td>\n//       </tr>\n//       <tr class=\"table__wrap\">\n//         <td class=\"description__table\">Original Title</td>\n//         <td class=\"description__table-result\">${original_title}</td>\n//       </tr>\n\n//       <tr class=\"table__wrap\">\n//         <td class=\"description__table\">Genre</td>\n//         <td class=\"description__table-result\">${getGenres(genre_ids, 100)}</td>\n//       </tr>\n//     </table>\n//     <p class=\"descrption__about\">ABOUT</p>\n//     <p class=\"description__text\">\n//      ${overview || 'There is no imformation about this movie'}\n//     </p>\n//     <ul class=\"btn__wrap\">\n//       <li>\n//         <button class=\"btn btn__modal-add\">add to Watched</button>\n//         <button class=\"btn btn__modal-r-watched is-hidden\">remove from Watched</button>\n//       </li>\n//       <li>\n//         <button class=\"btn btn__modal-queue\">add to queue</button>\n//         <button class=\"btn btn__modal-r-queue is-hidden\">remove from queue</button>\n//       </li>\n//     </ul>\n//   </div>\n// `);\n// }\n\n//функціонал для ЛС\nfunction addToWatchedLS() {\n  storage.refreshData();\n\n  storage.addToWatchedFilms(currentFilm);\n  storage.saveWatchedFilms();\n\n  //\n\n  addToWatchedBtn.classList.add('is-hidden');\n  removeFromWatchedBtn.classList.remove('is-hidden');\n\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getWathedFilmsList());\n\n  pagination();\n}\n\nfunction removeFromWatchedLS() {\n  addToWatchedBtn.classList.remove('is-hidden');\n  removeFromWatchedBtn.classList.add('is-hidden');\n\n  storage.removeFromWatched(currentFilm);\n  if (checkCurrentPage(wachedBtn)) {\n    removeFromDomElement(currentFilm);\n  }\n  pagination();\n}\n// uquqee\n\nfunction addToQueueLS() {\n  storage.myAddToQueueFilms(currentFilm);\n\n  addToQueueBtn.classList.add('is-hidden');\n  removeFromQueueBtn.classList.remove('is-hidden');\n\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getQueueFilmsList());\n  pagination();\n}\n\nfunction removeFromQueueLS() {\n  addToQueueBtn.classList.remove('is-hidden');\n  removeFromQueueBtn.classList.add('is-hidden');\n\n  storage.removeFromQueue(currentFilm);\n\n  if (checkCurrentPage(queueBtn)) {\n    removeFromDomElement(currentFilm);\n  }\n  pagination();\n}\n\nfunction removeFromDomElement(objFilm) {\n  const el = document.getElementById(objFilm.id);\n  el.remove();\n}\nfunction checkCurrentPage(btn) {\n  if (btn.classList.contains('currentbtn')) {\n    return true;\n  }\n  return false;\n}\n"],"names":["$4Nugj","parcelRequire","$cecbdd76f2d3d4bd$var$addToWatchedBtn","$cecbdd76f2d3d4bd$var$addToQueueBtn","$cecbdd76f2d3d4bd$var$removeFromWatchedBtn","$cecbdd76f2d3d4bd$var$removeFromQueueBtn","$cecbdd76f2d3d4bd$var$storage","$lWBva","default","$cecbdd76f2d3d4bd$var$movieDescription","document","querySelector","refs","closeModalBtnForOneMovie","addEventListener","backdropOneMovie","classList","add","body","remove","removeEventListener","$cecbdd76f2d3d4bd$var$onEscapeClick","$cecbdd76f2d3d4bd$var$onBackdropClick","libGallery","e","element","target","nodeName","$cecbdd76f2d3d4bd$var$checkClick","curentObject","name","alt","filmsSet","$cecbdd76f2d3d4bd$var$getMoviesToLocalhost","$cecbdd76f2d3d4bd$var$currentFilm","find","option","original_title","param","genre_ids","poster_path","overview","popularity","title","vote_average","vote_count","innerHTML","poster","concat","toFixed","$kKCqO","getGenres","$cecbdd76f2d3d4bd$var$renderOneMovieForModal","$cecbdd76f2d3d4bd$var$addToWatchedLS","$cecbdd76f2d3d4bd$var$removeFromWatchedLS","$cecbdd76f2d3d4bd$var$addToQueueLS","$cecbdd76f2d3d4bd$var$removeFromQueueLS","checkFilmInWatchedLocStor","checkFilmInQueueLocStor","renderFilmsLibrary","getWathedFilmsList","$cecbdd76f2d3d4bd$var$queueBtn","$cecbdd76f2d3d4bd$var$wachedBtn","event","code","JSON","parse","localStorage","getItem","refreshData","addToWatchedFilms","saveWatchedFilms","pagination","removeFromWatched","$cecbdd76f2d3d4bd$var$checkCurrentPage","$cecbdd76f2d3d4bd$var$removeFromDomElement","myAddToQueueFilms","getQueueFilmsList","removeFromQueue","objFilm","getElementById","id","btn","contains","style","backgroundColor","border"],"version":3,"file":"library.2b36e573.js.map"}