{"mappings":"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","sources":["src/js/onClickBtnActions.js","src/js/refs.js","src/js/renderMarkup.js","src/js/trailers.js","src/library.js","src/js/watched-queue.js"],"sourcesContent":["const refs = {\n  modal: document.querySelector('[data-modal-footer]'),\n  closeBtn: document.querySelector('.footer-modal__closeBtn'),\n  openFooterModalBtn: document.querySelector('.js-team'),\n};\n\nrefs.openFooterModalBtn.addEventListener('click', e => {\n  e.preventDefault();\n  refs.modal.classList.remove('is-hidden');\n  document.addEventListener('keydown', onEscapeClick);\n  document.addEventListener('click', onBackdropClick);\n});\nrefs.closeBtn.addEventListener('click', e => {\n  e.preventDefault();\n  refs.modal.classList.add('is-hidden');\n  document.removeEventListener('keydown', onEscapeClick);\n  document.removeEventListener('click', onBackdropClick);\n});\nfunction onEscapeClick(event) {\n  if (event.code === 'Escape') {\n    refs.modal.classList.add('is-hidden');\n    document.removeEventListener('keydown', onEscapeClick);\n    document.removeEventListener('click', onBackdropClick);\n  }\n}\nfunction onBackdropClick(event) {\n  if (event.target === refs.modal) {\n    refs.modal.classList.add('is-hidden');\n    document.removeEventListener('click', onBackdropClick);\n    document.removeEventListener('keydown', onEscapeClick);\n  }\n}","const refs = {\n  backdrop: document.querySelector('.backdrop'),\n  teamLink: document.querySelector('.js-team'),\n  spinerBackdrop: document.querySelector('.spiner__backdrop'),\n  filmsListRef: document.querySelector('.films'),\n  gallery: document.querySelector('.gallery__set'),\n  libGallery: document.querySelector('.lib-gallery__set'),\n  container: document.getElementById('pagination'),\n  galleryGenreItem: document.querySelector('.film__genres'),\n  form: document.querySelector('.header-film__form'),\n  closeModalBtnForOneMovie: document.querySelector('.modal__button'),\n  modalForOneMovie: document.querySelector('.modal'),\n  backdropOneMovie: document.querySelector('.backdrop'),\n  btnAddToWatched: document.querySelector('.btn__modal-add'),\n  btnRemoveFromWatched: document.querySelector('.btn__modal-r-watched'),\n  btnAddToQuene: document.querySelector('.btn__modal-queue'),\n  btnRemoveFromQuene: document.querySelector('.btn__modal-r-queue'),\n  trailerBackdrop: document.querySelector('.js-backdrop-trailer'),\n};\n\nexport { refs };\n","import { refs } from './refs';\n// import TrendingMovies from './MykolaPom';\n\n// функция отрисовки топ фильмов\nexport function renderFilmsMarkup(films) {\n  films\n    .map(({ poster_path, genre_ids, title, release_date, id }) => {\n      const poster = poster_path\n        ? `https://image.tmdb.org/t/p/w500${poster_path}`\n        : `https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg`;\n      return `<li class=\"films__item\" data-id=${id || `No ID`}>\n                <div class=\"films__img\">\n                    <img src=https://image.tmdb.org/t/p/original${poster} alt=\"${\n        title || 'No title'\n      }\" loading=\"lazy\" id=${id}>\n                </div>\n                <div class=\"films__description\" id=${id}>\n                  <p class=\"films__title\" id=${id}>${title || 'No title'}</p>\n                  <div class=\"films__meta\" id=${id}>\n                    <span class=\"films__genres\" id=${id}>${\n        getGenres(genre_ids, 3) || 'No genres info'\n      }</span>\n                    <span class=\"films__sep\" id=${id}>|</span>\n                    <span class=\"films__data\" id=${id}>${\n        new Date(release_date).getFullYear() || 'No info'\n      }</span>\n                  </div>\n                </div>\n            </li>`;\n    })\n    .forEach(c => refs.gallery.insertAdjacentHTML('beforeend', c));\n}\nexport function getGenres(genre_ids, maxGenresShown) {\n  const genres = JSON.parse(localStorage.getItem('genres'));\n  const genresArr = [];\n\n  for (\n    let genreIndex = 0;\n    genreIndex < maxGenresShown && genreIndex < genre_ids.length;\n    genreIndex++\n  ) {\n    for (const value of genres) {\n      if (genre_ids[genreIndex] === value.id) {\n        genresArr.push(value.name);\n      }\n    }\n  }\n  if (genre_ids.length > maxGenresShown) {\n    genresArr.splice(maxGenresShown - 1, 1, 'Other');\n  }\n  return genresArr.join(', ');\n}\n\nexport function renderFilmsLibrary(films) {\n  if (films) {\n    if (!films.length) {\n      setImgInLib();\n      return;\n    }\n    films\n      .map(({ poster_path, genre_ids, title, release_date, id }) => {\n        const poster = poster_path\n          ? `https://image.tmdb.org/t/p/w500${poster_path}`\n          : `https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg`;\n        return `<li class=\"films__item\" id=${id || `No ID`}>\n                <div class=\"films__img\">\n                    <img src=https://image.tmdb.org/t/p/original${poster} alt=\"${\n          title || 'No title'\n        }\" loading=\"lazy\" id=${id}>\n                </div>\n                <div class=\"films__description\" id=${id}>\n                  <p class=\"films__title\" id=${id}>${title || 'No title'}</p>\n                  <div class=\"films__meta\" id=${id}>\n                    <span class=\"films__genres\" id=${id}>${\n          getGenres(genre_ids, 3) || 'No genres info'\n        }</span>\n                    <span class=\"films__sep\" id=${id}>|</span>\n                    <span class=\"films__data\" id=${id}>${\n          new Date(release_date).getFullYear() || 'No info'\n        }</span>\n                  </div>\n                </div>\n            </li>`;\n      })\n      .forEach(c => refs.libGallery.insertAdjacentHTML('beforeend', c));\n    return;\n  }\n  setImgInLib();\n}\n\nexport function setImgInLib() {\n  const img = document.createElement('IMG');\n  img.src =\n    'https://pixabay.com/get/gefdffe0e3a111a2d5c539dc6a08c82b4b787e4962786126035071f95a2a5c46d2ebf8f194c8663dc4a63fb2935acb30d52287b634ea8567d22c059278eaa580d_1280.jpg';\n  img.alt = 'plug';\n  img.width = '700';\n  // img.style.marginTop = '30px';\n  refs.libGallery.append(img);\n}\n\n// функция отрисовки жанров\n\n// export function renderGenres(renderGenresFilms) {\n//   let genreString;\n//   renderGenresFilms.map(film => {\n//     const filmGenres = film.genre_ids;\n//     let array = [];\n\n//     //console.log('filmGenres', filmGenres);\n//     filmGenres.map(genre => {\n//       const filmGenre = localStorage.getItem(genre);\n//       array.push(filmGenre);\n//       genreString = array.join(', ');\n//     });\n//   });\n//   //refs.galleryGenreItem.textContent = 777;\n//   return genreString;\n// }\n\n// // Функция записи жанров в локалсторедж\n// export async function getGenres() {\n//   const trendingMovies = new TrendingMovies();\n//   try {\n//     const result = await trendingMovies.fetchGenresIds();\n//     for (const genre of result) {\n//       localStorage.setItem(`${genre.id}`, `${genre.name}`);\n//     }\n//   } catch (error) {\n//     console.log(error);\n//   }\n// }\n// lib-gallery-render-func\n","import { refs } from './refs';\n\nvar tag = document.createElement('script');\ntag.src = 'https://www.youtube.com/iframe_api';\nvar firstScriptTag = document.getElementsByTagName('script')[0];\nfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\nlet player;\n\nasync function getTrailers(id) {\n  const apiKey = `5d44c33850258a6ea050e461474b1468`;\n  try {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/movie/${id}/videos?api_key=${apiKey}&language=en-US`\n    );\n    if (response.ok) {\n      return await response.json();\n    }\n  } catch (error) {\n    console.log('error');\n  }\n  //throw new Error('Ошибка! Нет трейлера к этому фильму!');\n}\n\nexport async function createTrailerLink() {\n  const id = document.querySelector('.play-trailer').id;\n  const fetchResult = await getTrailers(id);\n  refs.trailerBackdrop.classList.remove('is-hidden');\n\n  if (fetchResult.results.length === 0) {\n    console.log('Нет в БД трейлера к этому фильму. Нам очень жаль.');\n\n    return;\n  }\n\n  let resultArray = fetchResult.results.find(\n    item => item.type === 'Trailer' && item.site === 'YouTube'\n  );\n  function onYouTubeIframeAPIReady(videoIdKey) {\n    player = new YT.Player('player', {\n      height: '360',\n      width: '640',\n      videoId: videoIdKey,\n      playerVars: {\n        autoplay: 1,\n        controls: 1,\n        rel: 0,\n      },\n      events: {\n        onReady: onPlayerReady,\n        onStateChange: onPlayerStateChange,\n      },\n    });\n  }\n  onYouTubeIframeAPIReady(resultArray.key);\n}\n\nrefs.trailerBackdrop.addEventListener('click', e => {\n  e.currentTarget.classList.toggle('is-hidden');\n  refs.trailerBackdrop.innerHTML = '';\n  refs.trailerBackdrop.innerHTML =\n    '<div class=\"modal__trailer\" id=\"player\"></div>';\n  stopVideo();\n});\n\n//refs.trailerBackdrop.addEventListener('keydown', onEscapeClickTrailer);\n\nfunction onPlayerReady(event) {\n  event.target.playVideo();\n}\n\nfunction onPlayerStateChange(event) {}\n\nfunction stopVideo() {\n  player.stopVideo();\n}\n\nfunction onEscapeClickTrailer(event) {\n  event.stopImmediatePropagation();\n  if (event.code == 'Escape') {\n    refs.trailerBackdrop.classList.toggle('is-hidden');\n    refs.trailerBackdrop.innerHTML = '';\n    refs.trailerBackdrop.innerHTML =\n      '<div class=\"modal__trailer\" id=\"player\"></div>';\n    stopVideo();\n  }\n}\n","// Федір, твори магію)\nimport './js/onClickBtnActions';\nimport { refs } from './js/refs';\nimport { renderFilmsLibrary } from './js/renderMarkup';\nimport FilmsStorage from './js/watched-queue';\nimport { getGenres } from './js/renderMarkup';\nimport { setImgInLib } from './js/renderMarkup';\nimport { createTrailerLink } from './js/trailers';\n//\n\nconst storage = new FilmsStorage();\nconst movieDescription = document.querySelector('.modal__wrap');\nrefs.closeModalBtnForOneMovie.addEventListener('click', onCloseModal);\nrefs.libGallery.addEventListener('click', onOpenModal);\n\n//\nlet addToWatchedBtn;\n\nlet addToQueueBtn;\nlet removeFromWatchedBtn;\nlet removeFromQueueBtn;\nlet currentFilm = {};\n\nrenderFilmsLibrary(storage.getWathedFilmsList());\n\nconst queueBtn = document.querySelector('.queue-button');\nconst wachedBtn = document.querySelector('.watched-button');\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nwachedBtn.addEventListener('click', onWachedBtnClick);\n\nfunction onQueueBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getQueueFilmsList());\n\n  queueBtn.style.backgroundColor = '#ff6b01';\n  queueBtn.style.border = 'none';\n  wachedBtn.style.backgroundColor = 'transparent';\n  wachedBtn.style.border = '1px solid white';\n\n  wachedBtn.classList.remove('currentbtn');\n  queueBtn.classList.add('currentbtn');\n}\n\nfunction onWachedBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getWathedFilmsList());\n\n  queueBtn.style.backgroundColor = 'transparent';\n  queueBtn.style.border = '1px solid white';\n  wachedBtn.style.backgroundColor = '#ff6b01';\n  wachedBtn.style.border = 'none';\n\n  queueBtn.classList.remove('currentbtn');\n  wachedBtn.classList.add('currentbtn');\n}\n\nfunction onEscapeClick(event) {\n  if (event.code == 'Escape') {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.target == refs.backdropOneMovie) {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\n// findFilmFunc\nfunction findCurrentFilm(id) {\n  let filmsSet = [];\n  if (wachedBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('watched-films'));\n  }\n  if (queueBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('queue-films'));\n  }\n\n  currentFilm = filmsSet.find(film => film.id === id);\n  return currentFilm;\n}\n// missclick\nfunction checkClick(e) {\n  const element = e.target.nodeName;\n  const emptyIMG = e.target;\n  if (emptyIMG.getAttribute('alt') === 'plug') {\n    return false;\n  }\n\n  if (\n    element === 'DIV' ||\n    element === 'IMG' ||\n    element === 'P' ||\n    element === 'SPAN'\n  ) {\n    return true;\n  }\n  return false;\n}\n\nfunction onOpenModal(e) {\n  if (!checkClick(e)) {\n    return;\n  }\n\n  refs.backdropOneMovie.classList.remove('is-hidden');\n  document.body.classList.add('modal-open');\n\n  const idFilm = Number(e.target.id);\n\n  const curentObject = findCurrentFilm(idFilm);\n\n  renderOneMovieForModal(curentObject);\n\n  //\n\n  addToWatchedBtn = document.querySelector('.btn__modal-add');\n  addToQueueBtn = document.querySelector('.btn__modal-queue');\n  removeFromQueueBtn = document.querySelector('.btn__modal-r-queue');\n  removeFromWatchedBtn = document.querySelector('.btn__modal-r-watched');\n\n  addToWatchedBtn.addEventListener('click', addToWatchedLS);\n  removeFromWatchedBtn.addEventListener('click', removeFromWatchedLS);\n  addToQueueBtn.addEventListener('click', addToQueueLS);\n  removeFromQueueBtn.addEventListener('click', removeFromQueueLS);\n  // trailer\n  const trailerBtn = document.querySelector('.play-trailer');\n  trailerBtn.addEventListener('click', createTrailerLink);\n\n  document.addEventListener('keydown', onEscapeClick);\n  document.addEventListener('click', onBackdropClick);\n\n  if (storage.checkFilmInWatchedLocStor(curentObject)) {\n    addToWatchedBtn.classList.add('is-hidden');\n    removeFromWatchedBtn.classList.remove('is-hidden');\n  }\n  if (storage.checkFilmInQueueLocStor(curentObject)) {\n    addToQueueBtn.classList.add('is-hidden');\n    removeFromQueueBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction onCloseModal() {\n  refs.backdropOneMovie.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n\n  document.removeEventListener('keydown', onEscapeClick);\n  document.removeEventListener('click', onBackdropClick);\n}\n\nfunction renderOneMovieForModal({\n  genre_ids,\n  poster_path,\n  original_title,\n  overview,\n  popularity,\n  title,\n  vote_average,\n  vote_count,\n  id,\n}) {\n  movieDescription.innerHTML = '';\n  const poster = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : `https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg`;\n  return (movieDescription.innerHTML = `\n  <div class=\"image__wrap\">\n    <img class=\"image\" src=\"https://image.tmdb.org/t/p/original${poster}\" alt=\"${\n    title || 'No title'\n  }\" />\n  </div>\n  <div class=\"description__wrap\">\n    <h1 class=\"description__title\">${title || 'No title'}</h1>\n    <table>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Vote / Votes</td>\n        <td class=\"description__table-result\">\n          <span class=\"votes\">${vote_average.toFixed(1) || 'No data'}</span> /${\n    vote_count || 'No data'\n  }\n        </td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Popularity</td>\n        <td class=\"description__table-result\">${\n          popularity.toFixed(1) || 'No data'\n        }</td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Original Title</td>\n        <td class=\"description__table-result\">${\n          original_title || 'No original title'\n        }</td>\n      </tr>\n\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Genre</td>\n        <td class=\"description__table-result\">${\n          getGenres(genre_ids, 100) || 'No genres info'\n        }</td>\n      </tr>\n    </table>\n    <p class=\"descrption__about\">ABOUT</p>\n    <p class=\"description__text\">\n     ${overview || 'There is no imformation about this movie'}\n    </p>\n    <ul class=\"btn__wrap\">\n      <li>\n        <button class=\"btn btn__modal-add\">add to Watched</button>\n        <button class=\"btn btn__modal-r-watched is-hidden\">remove from Watched</button>\n      </li>\n      <li>\n        <button class=\"btn btn__modal-queue\">add to queue</button>\n        <button class=\"btn btn__modal-r-queue is-hidden\">remove from queue</button>\n      </li>\n    </ul>\n    <div class=\"btn__wrap\">\n    <button class=\"btn play-trailer\" id=\"${id}\">Watch Trailer</button>\n    </div>\n  </div>\n`);\n}\n\n//функціонал для ЛС\nfunction addToWatchedLS() {\n  storage.refreshData();\n\n  storage.addToWatchedFilms(currentFilm);\n  storage.saveWatchedFilms();\n\n  //\n\n  addToWatchedBtn.classList.add('is-hidden');\n  removeFromWatchedBtn.classList.remove('is-hidden');\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    if (storage.getWathedFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n}\n\nfunction removeFromWatchedLS() {\n  addToWatchedBtn.classList.remove('is-hidden');\n  removeFromWatchedBtn.classList.add('is-hidden');\n\n  storage.removeFromWatched(currentFilm);\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getWathedFilmsList().length === 0) {\n    setImgInLib();\n  }\n}\n// uquqee\n\nfunction addToQueueLS() {\n  storage.myAddToQueueFilms(currentFilm);\n\n  addToQueueBtn.classList.add('is-hidden');\n  removeFromQueueBtn.classList.remove('is-hidden');\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    if (storage.getQueueFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n}\n\nfunction removeFromQueueLS() {\n  addToQueueBtn.classList.remove('is-hidden');\n  removeFromQueueBtn.classList.add('is-hidden');\n\n  storage.removeFromQueue(currentFilm);\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getQueueFilmsList().length === 0) {\n    setImgInLib();\n  }\n}\n\nfunction removeFromDomElement() {\n  const el = document.getElementById(currentFilm.id);\n  el.remove();\n}\nfunction addToDOMelement() {\n  renderFilmsLibrary([currentFilm]);\n}\n","export default class FilmsStorage {\n  constructor() {\n    this._watchedFilmsList = [];\n    this._queueFilmsList = [];\n    this.refreshData();\n    this.refreshDataQueue();\n  }\n  refreshData() {\n    if (localStorage.getItem('watched-films')) {\n      this._watchedFilmsList = JSON.parse(\n        localStorage.getItem('watched-films')\n      );\n    }\n    //console.log('пусто');\n  }\n\n  refreshDataQueue() {\n    if (localStorage.getItem('queue-films')) {\n      this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    }\n    return;\n  }\n\n  addToWatchedFilms(item) {\n    if (localStorage.getItem('watched-films')) {\n      this._watchedFilmsList = JSON.parse(\n        localStorage.getItem('watched-films')\n      );\n    }\n    this._watchedFilmsList.push(item);\n    this.saveWatchedFilms();\n  }\n\n  myAddToQueueFilms(film) {\n    if (localStorage.getItem('queue-films')) {\n      this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    }\n\n    this._queueFilmsList.push(film);\n    localStorage.setItem('queue-films', JSON.stringify(this._queueFilmsList));\n  }\n\n  addToQueueFilms(item) {\n    if (localStorage.getItem('queue-films')) {\n      this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    }\n    this._queueFilmsList.push(item);\n    this.saveQueueFilms();\n  }\n\n  saveWatchedFilms() {\n    localStorage.setItem(\n      'watched-films',\n      JSON.stringify(this._watchedFilmsList)\n    );\n  }\n\n  saveQueueFilms() {\n    localStorage.setItem('queue-films', JSON.stringify(this._queueFilmsList));\n  }\n\n  getWathedFilmsList() {\n    if (!localStorage.getItem('watched-films')) {\n      return;\n    }\n    // this._watchedFilmsList = JSON.parse(localStorage.getItem('watched-films'));\n    return JSON.parse(localStorage.getItem('watched-films'));\n  }\n  getQueueFilmsList() {\n    if (!localStorage.getItem('queue-films')) {\n      return;\n    }\n    // this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    return JSON.parse(localStorage.getItem('queue-films'));\n  }\n  removeFromWatched(film) {\n    if (!localStorage.getItem('watched-films')) {\n      return;\n    }\n    this._watchedFilmsList = JSON.parse(localStorage.getItem('watched-films'));\n    const index = this._watchedFilmsList.findIndex(\n      option => option.title === film.title\n    );\n    this._watchedFilmsList.splice(index, 1);\n    this.saveWatchedFilms();\n  }\n  removeFromQueue(film) {\n    if (!localStorage.getItem('queue-films')) {\n      return;\n    }\n    this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    const index = this._queueFilmsList.findIndex(\n      option => option.title === film.title\n    );\n    this._queueFilmsList.splice(index, 1);\n    this.saveQueueFilms();\n  }\n\n  checkFilmInWatchedLocStor(film) {\n    if (!localStorage.getItem('watched-films')) {\n      return;\n    }\n    this._watchedFilmsList = JSON.parse(localStorage.getItem('watched-films'));\n    const answer = this._watchedFilmsList.find(\n      option => option.title === film.title\n    );\n    if (answer) {\n      return true;\n    }\n    return false;\n  }\n\n  checkFilmInQueueLocStor(film) {\n    if (!localStorage.getItem('queue-films')) {\n      return;\n    }\n    this._queueFilmsList = JSON.parse(localStorage.getItem('queue-films'));\n    const answer = this._queueFilmsList.find(\n      option => option.title === film.title\n    );\n    if (answer) {\n      return true;\n    }\n    return false;\n  }\n}\n\n//const storage = new FilmsStorage();\n\n//const addToWatchedBtn = document.querySelector('.btn__modal-add');\n\n//addToWatchedBtn.addEventListener('click', addToLS);\n\n//function addToLS() {\n//  console.log(1);\n//}\n"],"names":["$823259d89a4bbb6b$var$refs","modal","document","querySelector","closeBtn","openFooterModalBtn","$823259d89a4bbb6b$var$onEscapeClick","event","code","classList","add","removeEventListener","$823259d89a4bbb6b$var$onBackdropClick","target","addEventListener","e","preventDefault","remove","$ee27a4d7c64fc8c4$export$21666b427502ea6d","backdrop","teamLink","spinerBackdrop","filmsListRef","gallery","libGallery","container","getElementById","galleryGenreItem","form","closeModalBtnForOneMovie","modalForOneMovie","backdropOneMovie","btnAddToWatched","btnRemoveFromWatched","btnAddToQuene","btnRemoveFromQuene","trailerBackdrop","$8fa1c37b43059e2f$export$c5604fa8028da00","genre_ids","maxGenresShown","genres","JSON","parse","localStorage","getItem","genresArr","genreIndex","length","value","id","push","name","splice","join","$8fa1c37b43059e2f$export$1385a8623dbdd01b","films","map","poster_path","title","release_date","Date","getFullYear","forEach","c","insertAdjacentHTML","$8fa1c37b43059e2f$export$22e832d66312f05f","img","createElement","src","alt","width","append","$ff26e1a57d3db400$var$tag","$ff26e1a57d3db400$var$firstScriptTag","getElementsByTagName","$ff26e1a57d3db400$var$player","async","$ff26e1a57d3db400$export$3220d1ba4c0e4520","fetchResult","response","fetch","ok","json","error","console","log","$ff26e1a57d3db400$var$getTrailers","results","resultArray","find","item","type","site","videoIdKey","key","YT","Player","height","videoId","playerVars","autoplay","controls","rel","events","onReady","$ff26e1a57d3db400$var$onPlayerReady","onStateChange","$ff26e1a57d3db400$var$onPlayerStateChange","playVideo","$ff26e1a57d3db400$var$stopVideo","stopVideo","parentNode","insertBefore","currentTarget","toggle","innerHTML","$ce3726a01b8ab25a$var$storage","refreshData","this","_watchedFilmsList","refreshDataQueue","_queueFilmsList","addToWatchedFilms","saveWatchedFilms","myAddToQueueFilms","film","setItem","stringify","addToQueueFilms","saveQueueFilms","getWathedFilmsList","getQueueFilmsList","removeFromWatched","index","findIndex","option","removeFromQueue","checkFilmInWatchedLocStor","checkFilmInQueueLocStor","constructor","$ce3726a01b8ab25a$var$movieDescription","$ce3726a01b8ab25a$var$addToWatchedBtn","$ce3726a01b8ab25a$var$addToQueueBtn","$ce3726a01b8ab25a$var$removeFromWatchedBtn","$ce3726a01b8ab25a$var$removeFromQueueBtn","body","$ce3726a01b8ab25a$var$onEscapeClick","$ce3726a01b8ab25a$var$onBackdropClick","element","nodeName","getAttribute","$ce3726a01b8ab25a$var$checkClick","curentObject","filmsSet","$ce3726a01b8ab25a$var$wachedBtn","contains","$ce3726a01b8ab25a$var$queueBtn","$ce3726a01b8ab25a$var$currentFilm","$ce3726a01b8ab25a$var$findCurrentFilm","Number","original_title","overview","popularity","vote_average","vote_count","poster","toFixed","$ce3726a01b8ab25a$var$renderOneMovieForModal","$ce3726a01b8ab25a$var$addToWatchedLS","$ce3726a01b8ab25a$var$removeFromWatchedLS","$ce3726a01b8ab25a$var$addToQueueLS","$ce3726a01b8ab25a$var$removeFromQueueLS","$ce3726a01b8ab25a$var$addToDOMelement","$ce3726a01b8ab25a$var$removeFromDomElement","style","backgroundColor","border"],"version":3,"file":"library.3d2d2529.js.map"}