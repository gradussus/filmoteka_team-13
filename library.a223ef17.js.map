{"mappings":"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","sources":["src/library.js"],"sourcesContent":["// Федір, твори магію)\nimport './js/scrollBtn';\nimport './js/onClickBtnActions';\nimport { refs } from './js/refs';\nimport { renderFilmsLibrary } from './js/renderMarkup';\nimport FilmsStorage from './js/watched-queue';\nimport { getGenres } from './js/renderMarkup';\nimport { setImgInLib, removeImgInLib } from './js/renderMarkup';\nimport { createTrailerLink } from './js/trailers';\n//\n\nconst storage = new FilmsStorage();\nconst movieDescription = document.querySelector('.modal__wrap');\nrefs.closeModalBtnForOneMovie.addEventListener('click', onCloseModal);\nrefs.libGallery.addEventListener('click', onOpenModal);\n\n//\nlet addToWatchedBtn;\n\nlet addToQueueBtn;\nlet removeFromWatchedBtn;\nlet removeFromQueueBtn;\nlet currentFilm = {};\n\nrenderFilmsLibrary(storage.getWathedFilmsList());\n\nconst queueBtn = document.querySelector('.queue-button');\nconst wachedBtn = document.querySelector('.watched-button');\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nwachedBtn.addEventListener('click', onWachedBtnClick);\n\nfunction onQueueBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getQueueFilmsList());\n\n  queueBtn.style.backgroundColor = '#ff6b01';\n  queueBtn.style.border = 'none';\n  wachedBtn.style.backgroundColor = 'transparent';\n  wachedBtn.style.border = '1px solid white';\n\n  wachedBtn.classList.remove('currentbtn');\n  queueBtn.classList.add('currentbtn');\n\n  setRemoveQueuePlug();\n}\nfunction onWachedBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getWathedFilmsList());\n\n  queueBtn.style.backgroundColor = 'transparent';\n  queueBtn.style.border = '1px solid white';\n  wachedBtn.style.backgroundColor = '#ff6b01';\n  wachedBtn.style.border = 'none';\n\n  queueBtn.classList.remove('currentbtn');\n  wachedBtn.classList.add('currentbtn');\n\n  setRemoveWatchedPlug();\n}\n\nfunction onEscapeClick(event) {\n  if (event.code == 'Escape') {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.target == refs.backdropOneMovie) {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\n// findFilmFunc\nfunction findCurrentFilm(id) {\n  let filmsSet = [];\n  if (wachedBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('watched-films'));\n  }\n  if (queueBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('queue-films'));\n  }\n\n  currentFilm = filmsSet.find(film => film.id === id);\n  return currentFilm;\n}\n// missclick\nfunction checkClick(e) {\n  const element = e.target.nodeName;\n  const emptyIMG = e.target;\n  if (emptyIMG.getAttribute('alt') === 'plug') {\n    return false;\n  }\n\n  if (\n    element === 'DIV' ||\n    element === 'IMG' ||\n    element === 'P' ||\n    element === 'SPAN'\n  ) {\n    return true;\n  }\n  return false;\n}\n\nfunction onOpenModal(e) {\n  if (!checkClick(e)) {\n    return;\n  }\n  refs.btnScroll.style.display = 'none';\n  refs.backdropOneMovie.classList.remove('is-hidden');\n  document.body.classList.add('modal-open');\n\n  const idFilm = Number(e.target.id);\n\n  const curentObject = findCurrentFilm(idFilm);\n\n  renderOneMovieForModal(curentObject);\n\n  //\n\n  addToWatchedBtn = document.querySelector('.btn__modal-add');\n  addToQueueBtn = document.querySelector('.btn__modal-queue');\n  removeFromQueueBtn = document.querySelector('.btn__modal-r-queue');\n  removeFromWatchedBtn = document.querySelector('.btn__modal-r-watched');\n\n  addToWatchedBtn.addEventListener('click', addToWatchedLS);\n  removeFromWatchedBtn.addEventListener('click', removeFromWatchedLS);\n  addToQueueBtn.addEventListener('click', addToQueueLS);\n  removeFromQueueBtn.addEventListener('click', removeFromQueueLS);\n  // trailer\n  const trailerBtn = document.querySelector('.play-trailer');\n  trailerBtn.addEventListener('click', createTrailerLink);\n\n  document.addEventListener('keydown', onEscapeClick);\n  document.addEventListener('click', onBackdropClick);\n\n  if (storage.checkFilmInWatchedLocStor(curentObject)) {\n    addToWatchedBtn.classList.add('is-hidden');\n    removeFromWatchedBtn.classList.remove('is-hidden');\n  }\n  if (storage.checkFilmInQueueLocStor(curentObject)) {\n    addToQueueBtn.classList.add('is-hidden');\n    removeFromQueueBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction onCloseModal() {\n  refs.backdropOneMovie.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n\n  document.removeEventListener('keydown', onEscapeClick);\n  document.removeEventListener('click', onBackdropClick);\n}\n\nfunction renderOneMovieForModal({\n  genre_ids,\n  poster_path,\n  original_title,\n  overview,\n  popularity,\n  title,\n  vote_average,\n  vote_count,\n  id,\n}) {\n  movieDescription.innerHTML = '';\n  const poster = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : `https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg`;\n  return (movieDescription.innerHTML = `\n  <div class=\"image__wrap\">\n    <img class=\"image\" src=\"https://image.tmdb.org/t/p/original${poster}\" alt=\"${\n    title || 'No title'\n  }\" />\n  </div>\n  <div class=\"description__wrap\">\n    <h1 class=\"description__title\">${title || 'No title'}</h1>\n    <table>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Vote / Votes</td>\n        <td class=\"description__table-result\">\n          <span class=\"votes\">${vote_average.toFixed(1) || 'No data'}</span> /${\n    vote_count || 'No data'\n  }\n        </td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Popularity</td>\n        <td class=\"description__table-result\">${\n          popularity.toFixed(1) || 'No data'\n        }</td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Original Title</td>\n        <td class=\"description__table-result\">${\n          original_title || 'No original title'\n        }</td>\n      </tr>\n\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Genre</td>\n        <td class=\"description__table-result\">${\n          getGenres(genre_ids, 100) || 'No genres info'\n        }</td>\n      </tr>\n    </table>\n    <p class=\"descrption__about\">ABOUT</p>\n    <p class=\"description__text\">\n     ${overview || 'There is no imformation about this movie'}\n    </p>\n    <ul class=\"btn__wrap\">\n      <li>\n        <button class=\"btn btn__modal-add\">add to Watched</button>\n        <button class=\"btn btn__modal-r-watched is-hidden\">remove from Watched</button>\n      </li>\n      <li>\n        <button class=\"btn btn__modal-queue\">add to queue</button>\n        <button class=\"btn btn__modal-r-queue is-hidden\">remove from queue</button>\n      </li>\n    </ul>\n    <div class=\"btn__wrap\">\n    <button class=\"btn play-trailer\" id=\"${id}\">Watch Trailer</button>\n    </div>\n  </div>\n`);\n}\n\n//функціонал для ЛС\nfunction addToWatchedLS() {\n  storage.refreshData();\n\n  storage.addToWatchedFilms(currentFilm);\n  storage.saveWatchedFilms();\n\n  //\n\n  addToWatchedBtn.classList.add('is-hidden');\n  removeFromWatchedBtn.classList.remove('is-hidden');\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    if (storage.getWathedFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n\nfunction removeFromWatchedLS() {\n  addToWatchedBtn.classList.remove('is-hidden');\n  removeFromWatchedBtn.classList.add('is-hidden');\n\n  storage.removeFromWatched(currentFilm);\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getWathedFilmsList().length === 0) {\n    setImgInLib();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n// uquqee\n\nfunction addToQueueLS() {\n  storage.myAddToQueueFilms(currentFilm);\n\n  addToQueueBtn.classList.add('is-hidden');\n  removeFromQueueBtn.classList.remove('is-hidden');\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    if (storage.getQueueFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n\nfunction removeFromQueueLS() {\n  addToQueueBtn.classList.remove('is-hidden');\n  removeFromQueueBtn.classList.add('is-hidden');\n\n  storage.removeFromQueue(currentFilm);\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getQueueFilmsList().length === 0) {\n    setImgInLib();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n\nfunction removeFromDomElement() {\n  const el = document.getElementById(currentFilm.id);\n  el.remove();\n}\nfunction addToDOMelement() {\n  renderFilmsLibrary([currentFilm]);\n}\n\nfunction setRemoveWatchedPlug() {\n  if (wachedBtn.classList.contains('currentbtn')) {\n    if (\n      storage.getWathedFilmsList() === undefined ||\n      !storage.getWathedFilmsList().length\n    ) {\n      setImgInLib();\n    } else {\n      removeImgInLib();\n    }\n  }\n}\nfunction setRemoveQueuePlug() {\n  if (queueBtn.classList.contains('currentbtn')) {\n    if (\n      storage.getQueueFilmsList() === undefined ||\n      !storage.getQueueFilmsList().length\n    ) {\n      setImgInLib();\n    } else {\n      removeImgInLib();\n    }\n  }\n}\n"],"names":["parcelRequire","$cecbdd76f2d3d4bd$var$addToWatchedBtn","$cecbdd76f2d3d4bd$var$addToQueueBtn","$cecbdd76f2d3d4bd$var$removeFromWatchedBtn","$cecbdd76f2d3d4bd$var$removeFromQueueBtn","$cecbdd76f2d3d4bd$var$storage","$lWBva","default","$cecbdd76f2d3d4bd$var$movieDescription","document","querySelector","$4Nugj","refs","closeModalBtnForOneMovie","addEventListener","backdropOneMovie","classList","add","body","remove","removeEventListener","$cecbdd76f2d3d4bd$var$onEscapeClick","$cecbdd76f2d3d4bd$var$onBackdropClick","libGallery","e","element","target","nodeName","getAttribute","$cecbdd76f2d3d4bd$var$checkClick","btnScroll","style","display","curentObject","id","filmsSet","$cecbdd76f2d3d4bd$var$wachedBtn","contains","JSON","parse","localStorage","getItem","$cecbdd76f2d3d4bd$var$queueBtn","$cecbdd76f2d3d4bd$var$currentFilm","find","film","$cecbdd76f2d3d4bd$var$findCurrentFilm","Number","param","genre_ids","poster_path","original_title","overview","popularity","title","vote_average","vote_count","innerHTML","poster","concat","toFixed","$5118m","getGenres","$cecbdd76f2d3d4bd$var$renderOneMovieForModal","$cecbdd76f2d3d4bd$var$addToWatchedLS","$cecbdd76f2d3d4bd$var$removeFromWatchedLS","$cecbdd76f2d3d4bd$var$addToQueueLS","$cecbdd76f2d3d4bd$var$removeFromQueueLS","$axifr","createTrailerLink","checkFilmInWatchedLocStor","checkFilmInQueueLocStor","renderFilmsLibrary","getWathedFilmsList","event","code","refreshData","addToWatchedFilms","saveWatchedFilms","length","$cecbdd76f2d3d4bd$var$addToDOMelement","$cecbdd76f2d3d4bd$var$setRemoveQueuePlug","$cecbdd76f2d3d4bd$var$setRemoveWatchedPlug","removeFromWatched","$cecbdd76f2d3d4bd$var$removeFromDomElement","setImgInLib","myAddToQueueFilms","getQueueFilmsList","removeFromQueue","getElementById","undefined","removeImgInLib","backgroundColor","border"],"version":3,"file":"library.a223ef17.js.map"}