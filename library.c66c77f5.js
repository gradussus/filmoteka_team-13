!function(){function e(e){return e&&e.__esModule?e.default:e}var t={backdrop:document.querySelector(".backdrop"),teamLink:document.querySelector(".js-team"),spinerBackdrop:document.querySelector(".spiner__backdrop"),filmsListRef:document.querySelector(".films"),gallery:document.querySelector(".gallery__set"),libGallery:document.querySelector(".lib-gallery__set"),container:document.getElementById("pagination"),galleryGenreItem:document.querySelector(".film__genres"),form:document.querySelector(".header-film__form"),closeModalBtnForOneMovie:document.querySelector(".modal__button"),modalForOneMovie:document.querySelector(".modal"),backdropOneMovie:document.querySelector(".backdrop"),btnAddToWatched:document.querySelector(".btn__modal-add"),btnRemoveFromWatched:document.querySelector(".btn__modal-r-watched"),btnAddToQuene:document.querySelector(".btn__modal-queue"),btnRemoveFromQuene:document.querySelector(".btn__modal-r-queue")};function i(e,t){for(var i=JSON.parse(localStorage.getItem("genres")),n=[],a=0;a<t&&a<e.length;a++){var s=!0,l=!1,o=void 0;try{for(var r,c=i[Symbol.iterator]();!(s=(r=c.next()).done);s=!0){var d=r.value;e[a]===d.id&&n.push(d.name)}}catch(e){l=!0,o=e}finally{try{s||null==c.return||c.return()}finally{if(l)throw o}}}return 0===n.length?"No genres info":(e.length>t&&n.push("Other"),n.join(", "))}function n(e){e.map((function(e){var t=e.poster_path,n=e.genre_ids,a=e.title,s=e.release_date,l=e.id,o=t?"https://image.tmdb.org/t/p/w500".concat(t):"https://image.tmdb.org/t/p/original/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg";return'<li class="films__item" data-id='.concat(l||"No ID",'>\n                <div class="films__img">\n                    <img src=https://image.tmdb.org/t/p/original').concat(o,' alt="').concat(a||"No title",'" loading="lazy">\n                </div>\n                <div class="films__description">\n                  <p class="films__title">').concat(a||"No title",'</p>\n                  <div class="films__meta">\n                    <span class="films__genres">').concat(i(n,3)||"No genres info",'</span>\n                    <span class="films__sep">|</span>\n                    <span class="films__data">').concat(new Date(s).getFullYear()||"No info","</span>\n                  </div>\n                </div>\n            </li>")})).forEach((function(e){return t.libGallery.insertAdjacentHTML("beforeend",e)}))}var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var s={};function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e,t,i){t&&l(e.prototype,t);i&&l(e,i);return e};var o,r,c,d,u=new(function(){"use strict";function t(){e(a)(this,t),this._watchedFilmsList=[],this._queueFilmsList=[],this.refreshData(),this.refreshDataQueue()}return e(s)(t,[{key:"refreshData",value:function(){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films")))}},{key:"refreshDataQueue",value:function(){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films")))}},{key:"addToWatchedFilms",value:function(e){localStorage.getItem("watched-films")&&(this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"))),this._watchedFilmsList.push(e),this.saveWatchedFilms()}},{key:"myAddToQueueFilms",value:function(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}},{key:"addToQueueFilms",value:function(e){localStorage.getItem("queue-films")&&(this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"))),this._queueFilmsList.push(e),this.saveQueueFilms()}},{key:"saveWatchedFilms",value:function(){localStorage.setItem("watched-films",JSON.stringify(this._watchedFilmsList))}},{key:"saveQueueFilms",value:function(){localStorage.setItem("queue-films",JSON.stringify(this._queueFilmsList))}},{key:"getWathedFilmsList",value:function(){if(localStorage.getItem("watched-films"))return JSON.parse(localStorage.getItem("watched-films"))}},{key:"getQueueFilmsList",value:function(){if(localStorage.getItem("queue-films"))return JSON.parse(localStorage.getItem("queue-films"))}},{key:"removeFromWatched",value:function(e){if(localStorage.getItem("watched-films")){this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films"));var t=this._watchedFilmsList.findIndex((function(t){return t.title===e.title}));this._watchedFilmsList.splice(t,1),this.saveWatchedFilms()}}},{key:"removeFromQueue",value:function(e){if(localStorage.getItem("queue-films")){this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films"));var t=this._queueFilmsList.findIndex((function(t){return t.title===e.title}));this._queueFilmsList.splice(t,1),this.saveQueueFilms()}}},{key:"checkFilmInWatchedLocStor",value:function(e){if(localStorage.getItem("watched-films"))return this._watchedFilmsList=JSON.parse(localStorage.getItem("watched-films")),!!this._watchedFilmsList.find((function(t){return t.title===e.title}))}},{key:"checkFilmInQueueLocStor",value:function(e){if(localStorage.getItem("queue-films"))return this._queueFilmsList=JSON.parse(localStorage.getItem("queue-films")),!!this._queueFilmsList.find((function(t){return t.title===e.title}))}}]),t}()),m=document.querySelector(".modal__wrap");t.closeModalBtnForOneMovie.addEventListener("click",(function(){t.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",g),document.removeEventListener("click",v)})),t.libGallery.addEventListener("click",(function(e){if(!function(e){var t=e.target.nodeName;return"DIV"===t||"IMG"===t||"P"===t||"SPAN"===t}(e))return;t.backdropOneMovie.classList.remove("is-hidden"),document.body.classList.add("modal-open");var n=(a=e.target.alt,s=p(),f=s.find((function(e){return e.original_title===a})));var a,s;(function(e){var t=e.genre_ids,n=e.poster_path,a=e.original_title,s=e.overview,l=e.popularity,o=e.title,r=e.vote_average,c=e.vote_count;m.innerHTML="";var d=n?"https://image.tmdb.org/t/p/original".concat(n):"https://image.tmdb.org/t/p/original/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg";m.innerHTML='\n  <div class="image__wrap">\n    <img class="image" src="https://image.tmdb.org/t/p/original'.concat(d,'" alt="').concat(o||"No title",'" />\n  </div>\n  <div class="description__wrap">\n    <h1 class="description__title">').concat(o||"No title",'</h1>\n    <table>\n      <tr class="table__wrap">\n        <td class="description__table">Vote / Votes</td>\n        <td class="description__table-result">\n          <span class="votes">').concat(r.toFixed(1)||"No data","</span> /").concat(c||"No data",'\n        </td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Popularity</td>\n        <td class="description__table-result">').concat(l.toFixed(1)||"No data",'</td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Original Title</td>\n        <td class="description__table-result">').concat(a||"No original title",'</td>\n      </tr>\n\n      <tr class="table__wrap">\n        <td class="description__table">Genre</td>\n        <td class="description__table-result">').concat(i(t,100)||"No genres info",'</td>\n      </tr>\n    </table>\n    <p class="descrption__about">ABOUT</p>\n    <p class="description__text">\n     ').concat(s||"There is no imformation about this movie",'\n    </p>\n    <ul class="btn__wrap">\n      <li>\n        <button class="btn btn__modal-add">add to Watched</button>\n        <button class="btn btn__modal-r-watched is-hidden">remove from Watched</button>\n      </li>\n      <li>\n        <button class="btn btn__modal-queue">add to queue</button>\n        <button class="btn btn__modal-r-queue is-hidden">remove from queue</button>\n      </li>\n    </ul>\n  </div>\n')})(n),o=document.querySelector(".btn__modal-add"),r=document.querySelector(".btn__modal-queue"),d=document.querySelector(".btn__modal-r-queue"),c=document.querySelector(".btn__modal-r-watched"),o.addEventListener("click",b),c.addEventListener("click",y),r.addEventListener("click",L),d.addEventListener("click",S),document.addEventListener("keydown",g),document.addEventListener("click",v),u.checkFilmInWatchedLocStor(n)&&(o.classList.add("is-hidden"),c.classList.remove("is-hidden"));u.checkFilmInQueueLocStor(n)&&(r.classList.add("is-hidden"),d.classList.remove("is-hidden"))}));var f={};n(u.getWathedFilmsList());var h=document.querySelector(".queue-button"),_=document.querySelector(".watched-button");function g(e){"Escape"==e.code&&(t.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function v(e){e.target==t.backdropOneMovie&&(t.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function p(){return JSON.parse(localStorage.getItem("currentFilms"))}function b(){u.refreshData(),u.addToWatchedFilms(f),u.saveWatchedFilms(),o.classList.add("is-hidden"),c.classList.remove("is-hidden"),t.libGallery.innerHTML="",n(u.getWathedFilmsList())}function y(){o.classList.remove("is-hidden"),c.classList.add("is-hidden"),u.removeFromWatched(f),F(f)}function L(){u.myAddToQueueFilms(f),r.classList.add("is-hidden"),d.classList.remove("is-hidden"),t.libGallery.innerHTML="",n(u.getQueueFilmsList())}function S(){r.classList.remove("is-hidden"),d.classList.add("is-hidden"),u.removeFromQueue(f),F(f)}function F(e){document.getElementById(e.id).remove()}h.addEventListener("click",(function(){t.libGallery.innerHTML="",n(u.getQueueFilmsList()),_.style.backgroundColor="transparent",_.style.border="1px solid white"})),_.addEventListener("click",(function(){t.libGallery.innerHTML="",n(u.getWathedFilmsList()),_.style.backgroundColor="#ff6b08",_.style.border="none"})),p()}();
//# sourceMappingURL=library.c66c77f5.js.map
