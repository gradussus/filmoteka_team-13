function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},t.parcelRequired7c6=o);o("krGWQ");var i=o("fb9GJ");var r=o("ljBKB"),d=o("krGWQ");const a=document.querySelector(".spiner__backdrop");function l(){a.classList.add("is-hidden"),document.removeEventListener("click",l),window.removeEventListener("load",l)}function c(){a.classList.remove("is-hidden"),document.removeEventListener("click",c)}window.addEventListener("load",l),new Promise(((e,t)=>{setTimeout(e,2e3)})).then((()=>{a.classList.add("hidden")}));const u=new class{fetchTrendingMovies(){return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=0888b454b4f7be0ebcd69ceb372ced29&page=${this.page}&language=en-US`).then((e=>e.json())).then((e=>(this.results=e.total_results,e.results)))}fetchMovie(){return fetch(`https://api.themoviedb.org/3/search/movie?api_key=0888b454b4f7be0ebcd69ceb372ced29&query=${this.query}&page=${this.page}&language=en-US`).then((e=>e.json())).then((e=>(this.results=e.total_results,e.results)))}fetchGenres(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=0888b454b4f7be0ebcd69ceb372ced29&language=en-US").then((e=>e.json()))}getPage(){return this.page}getResults(){return this.results}setPage(e){this.page=e}setQuery(e){this.query=e}constructor(){this.page=1,this.query="",this.results=Number}},m=document.querySelector(".header-film__warning-msg");function v(e){localStorage.setItem("currentFilms",JSON.stringify(e))}function h(){localStorage.removeItem("currentFilms")}let f={totalItems:100,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"};u.fetchGenres().then((({genres:e})=>{const t=[...e];localStorage.setItem("genres",JSON.stringify(t))})),u.fetchTrendingMovies().then((t=>{(0,r.renderFilmsMarkup)(t),f.totalItems=u.getResults(),d.refs.gallery.childElementCount>10&&new(e(i))(d.refs.container,f).on("beforeMove",(function(e){d.refs.gallery.innerHTML="",c(),u.setPage(e.page),u.fetchTrendingMovies().then((e=>{!function(e){c(),(0,r.renderFilmsMarkup)(e),l(),h(),v(e),window.scrollTo({top:0,behavior:"smooth"})}(e),l()})).catch((e=>console.log(e)))})),v(t)})).catch((e=>console.log(e))),d.refs.form.addEventListener("submit",(function(t){t.preventDefault(),c();let n=d.refs.form.firstElementChild.value;if(!n.trim())return m.classList.remove("visually-hidden"),d.refs.form.firstElementChild.value="",void l();u.setQuery(n),u.setPage(1),u.fetchMovie().then((t=>{if(!t.length)return m.classList.remove("visually-hidden"),d.refs.form.firstElementChild.value="",void l();m.classList.add("visually-hidden"),d.refs.gallery.innerHTML="",h(),v(t),(0,r.renderFilmsMarkup)(t),l(),f.totalItems=u.getResults(),new(e(i))(d.refs.container,f).on("beforeMove",(function(e){d.refs.gallery.innerHTML="";const t=d.refs.form.firstElementChild.value;u.setPage(e.page),u.setQuery(t),c(),u.fetchMovie().then((e=>{h(),v(e),(0,r.renderFilmsMarkup)(e),l()})).catch((e=>console.log(e)))}))})).catch((e=>console.log(e)))}));d=o("krGWQ"),r=o("ljBKB"),r=o("ljBKB");var p=o("jew7v");const g=document.querySelector(".modal__wrap");let b,_,L,y;d.refs.closeModalBtnForOneMovie.addEventListener("click",(function(){d.refs.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",E),document.removeEventListener("click",M)})),d.refs.gallery.addEventListener("click",(function(e){if(!function(e){const t=e.target.nodeName;return"DIV"===t||"IMG"===t||"P"===t||"SPAN"===t}(e))return;d.refs.backdropOneMovie.classList.remove("is-hidden"),document.body.classList.add("modal-open");const t=function(e){const t=S();return w=t.find((t=>t.original_title===e)),w}(e.target.alt);(function({genre_ids:e,poster_path:t,original_title:n,overview:s,popularity:o,title:i,vote_average:d,vote_count:a}){g.innerHTML="";const l=t?`https://image.tmdb.org/t/p/w500${t}`:"https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg";g.innerHTML=`\n  <div class="image__wrap">\n    <img class="image" src="https://image.tmdb.org/t/p/original${l}" alt="${i||"No title"}" />\n  </div>\n  <div class="description__wrap">\n    <h1 class="description__title">${i||"No title"}</h1>\n    <table>\n      <tr class="table__wrap">\n        <td class="description__table">Vote / Votes</td>\n        <td class="description__table-result">\n          <span class="votes">${d.toFixed(1)||"No data"}</span> /${a||"No data"}\n        </td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Popularity</td>\n        <td class="description__table-result">${o.toFixed(1)||"No data"}</td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Original Title</td>\n        <td class="description__table-result">${n||"No original title"}</td>\n      </tr>\n\n      <tr class="table__wrap">\n        <td class="description__table">Genre</td>\n        <td class="description__table-result">${(0,r.getGenres)(e,100)||"No genres info"}</td>\n      </tr>\n    </table>\n    <p class="descrption__about">ABOUT</p>\n    <p class="description__text">\n     ${s||"There is no imformation about this movie"}\n    </p>\n    <ul class="btn__wrap">\n      <li>\n        <button class="btn btn__modal-add">add to Watched</button>\n        <button class="btn btn__modal-r-watched is-hidden">remove from Watched</button>\n      </li>\n      <li>\n        <button class="btn btn__modal-queue">add to queue</button>\n        <button class="btn btn__modal-r-queue is-hidden">remove from queue</button>\n      </li>\n    </ul>\n  </div>\n`})(t),l(),b=document.querySelector(".btn__modal-add"),_=document.querySelector(".btn__modal-queue"),y=document.querySelector(".btn__modal-r-queue"),L=document.querySelector(".btn__modal-r-watched"),b.addEventListener("click",q),L.addEventListener("click",T),_.addEventListener("click",F),y.addEventListener("click",N),document.addEventListener("keydown",E),document.addEventListener("click",M),k.checkFilmInWatchedLocStor(t)&&(b.classList.add("is-hidden"),L.classList.remove("is-hidden"));k.checkFilmInQueueLocStor(t)&&(_.classList.add("is-hidden"),y.classList.remove("is-hidden"))}));let w={};const k=new(0,p.default);function E(e){"Escape"==e.code&&(d.refs.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function M(e){e.target==d.refs.backdropOneMovie&&(d.refs.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function S(){return JSON.parse(localStorage.getItem("currentFilms"))}function q(){k.refreshData(),k.addToWatchedFilms(w),k.saveWatchedFilms(),b.classList.add("is-hidden"),L.classList.remove("is-hidden")}function F(){k.myAddToQueueFilms(w),_.classList.add("is-hidden"),y.classList.remove("is-hidden")}function T(){b.classList.remove("is-hidden"),L.classList.add("is-hidden"),k.removeFromWatched(w)}function N(){_.classList.remove("is-hidden"),y.classList.add("is-hidden"),k.removeFromQueue(w)}S();const B={modal:document.querySelector("[data-modal-footer]"),closeBtn:document.querySelector(".footer-modal__closeBtn"),openFooterModalBtn:document.querySelector(".js-team")};function O(e){"Escape"===e.code&&(B.modal.classList.add("is-hidden"),document.removeEventListener("keydown",O),document.removeEventListener("click",j))}function j(e){e.target===B.modal&&(B.modal.classList.add("is-hidden"),document.removeEventListener("click",j),document.removeEventListener("keydown",O))}B.openFooterModalBtn.addEventListener("click",(e=>{e.preventDefault(),B.modal.classList.remove("is-hidden"),document.addEventListener("keydown",O),document.addEventListener("click",j)})),B.closeBtn.addEventListener("click",(e=>{e.preventDefault(),B.modal.classList.add("is-hidden"),document.removeEventListener("keydown",O),document.removeEventListener("click",j)})),o("ljBKB");const I=document.querySelector(".scroll-btn");window.onscroll=function(){document.body.scrollTop>30||document.documentElement.scrollTop>30?I.style.display="flex":I.style.display="none"},o("jew7v");
//# sourceMappingURL=index.4e803a59.js.map
