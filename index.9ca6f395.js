function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){s[e]=t},t.parcelRequired7c6=i);i("krGWQ");var o=i("fb9GJ");var r=i("ljBKB"),a=i("krGWQ");const l=document.querySelector(".spiner__backdrop");function d(){l.classList.add("is-hidden"),document.removeEventListener("click",d),window.removeEventListener("load",d)}function c(){l.classList.remove("is-hidden"),document.removeEventListener("click",c)}window.addEventListener("load",d),new Promise(((e,t)=>{setTimeout(e,2e3)})).then((()=>{l.classList.add("hidden")}));const u=new class{fetchTrendingMovies(){return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=0888b454b4f7be0ebcd69ceb372ced29&page=${this.page}&language=en-US`).then((e=>e.json())).then((e=>(this.results=e.total_results,e.results)))}fetchMovie(){return fetch(`https://api.themoviedb.org/3/search/movie?api_key=0888b454b4f7be0ebcd69ceb372ced29&query=${this.query}&page=${this.page}&language=en-US`).then((e=>e.json())).then((e=>(this.results=e.total_results,e.results)))}fetchGenres(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=0888b454b4f7be0ebcd69ceb372ced29&language=en-US").then((e=>e.json()))}getPage(){return this.page}getResults(){return this.results}setPage(e){this.page=e}setQuery(e){this.query=e}constructor(){this.page=1,this.query="",this.results=Number}},m=document.querySelector(".header-film__warning-msg");function h(e){localStorage.setItem("currentFilms",JSON.stringify(e))}function f(){localStorage.removeItem("currentFilms")}let p={totalItems:100,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"};function v(e,t){if(e>1){if(document.querySelector(".tui-first").classList.add("tui-when-other-page"),Math.ceil(t)===e){document.querySelector(".tui-last").classList.add("tui-first")}}if(1===e){document.querySelector(".tui-first").classList.remove("tui-when-other-page")}}u.fetchGenres().then((({genres:e})=>{const t=[...e];localStorage.setItem("genres",JSON.stringify(t))})),u.fetchTrendingMovies().then((t=>{(0,r.renderFilmsMarkup)(t),p.totalItems=u.getResults(),a.refs.gallery.childElementCount>10&&new(e(o))(a.refs.container,p).on("beforeMove",(function(e){a.refs.gallery.innerHTML="",c(),u.setPage(e.page),u.fetchTrendingMovies().then((t=>{!function(e,t,n){c(),(0,r.renderFilmsMarkup)(e),d(),f(),h(e),v(t,n),window.scrollTo({top:0,behavior:"smooth"})}(t,e.page,p.totalItems/p.itemsPerPage),d()})).catch((e=>console.log(e)))})),h(t)})).catch((e=>console.log(e))),a.refs.form.addEventListener("submit",(function(t){t.preventDefault(),c();let n=a.refs.form.firstElementChild.value;if(!n.trim())return m.classList.remove("visually-hidden"),a.refs.form.firstElementChild.value="",void d();u.setQuery(n),u.setPage(1),u.fetchMovie().then((t=>{if(!t.length)return m.classList.remove("visually-hidden"),a.refs.form.firstElementChild.value="",void d();m.classList.add("visually-hidden"),a.refs.gallery.innerHTML="",f(),h(t),(0,r.renderFilmsMarkup)(t),d(),p.totalItems=u.getResults(),new(e(o))(a.refs.container,p).on("beforeMove",(function(e){a.refs.gallery.innerHTML="";const t=a.refs.form.firstElementChild.value;u.setPage(e.page),u.setQuery(t),c(),u.fetchMovie().then((t=>{f(),h(t),(0,r.renderFilmsMarkup)(t),d(),v(e.page,p.totalItems/p.itemsPerPage)})).catch((e=>console.log(e)))}))})).catch((e=>console.log(e)))}));a=i("krGWQ"),r=i("ljBKB"),r=i("ljBKB");var g=i("jew7v");const b=document.querySelector(".modal__wrap");let _,L,y,w;a.refs.closeModalBtnForOneMovie.addEventListener("click",(function(){a.refs.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",E),document.removeEventListener("click",S)})),a.refs.gallery.addEventListener("click",(function(e){if(!function(e){const t=e.target.nodeName;return"DIV"===t||"IMG"===t||"P"===t||"SPAN"===t}(e))return;a.refs.backdropOneMovie.classList.remove("is-hidden"),document.body.classList.add("modal-open");const t=function(e){const t=q();return k=t.find((t=>t.original_title===e)),k}(e.target.alt);(function({genre_ids:e,poster_path:t,original_title:n,overview:s,popularity:i,title:o,vote_average:a,vote_count:l}){b.innerHTML="";const d=t?`https://image.tmdb.org/t/p/w500${t}`:"https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg";b.innerHTML=`\n  <div class="image__wrap">\n    <img class="image" src="https://image.tmdb.org/t/p/original${d}" alt="${o||"No title"}" />\n  </div>\n  <div class="description__wrap">\n    <h1 class="description__title">${o||"No title"}</h1>\n    <table>\n      <tr class="table__wrap">\n        <td class="description__table">Vote / Votes</td>\n        <td class="description__table-result">\n          <span class="votes">${a.toFixed(1)||"No data"}</span> /${l||"No data"}\n        </td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Popularity</td>\n        <td class="description__table-result">${i.toFixed(1)||"No data"}</td>\n      </tr>\n      <tr class="table__wrap">\n        <td class="description__table">Original Title</td>\n        <td class="description__table-result">${n||"No original title"}</td>\n      </tr>\n\n      <tr class="table__wrap">\n        <td class="description__table">Genre</td>\n        <td class="description__table-result">${(0,r.getGenres)(e,100)||"No genres info"}</td>\n      </tr>\n    </table>\n    <p class="descrption__about">ABOUT</p>\n    <p class="description__text">\n     ${s||"There is no imformation about this movie"}\n    </p>\n    <ul class="btn__wrap">\n      <li>\n        <button class="btn btn__modal-add">add to Watched</button>\n        <button class="btn btn__modal-r-watched is-hidden">remove from Watched</button>\n      </li>\n      <li>\n        <button class="btn btn__modal-queue">add to queue</button>\n        <button class="btn btn__modal-r-queue is-hidden">remove from queue</button>\n      </li>\n    </ul>\n  </div>\n`})(t),d(),_=document.querySelector(".btn__modal-add"),L=document.querySelector(".btn__modal-queue"),w=document.querySelector(".btn__modal-r-queue"),y=document.querySelector(".btn__modal-r-watched"),_.addEventListener("click",T),y.addEventListener("click",N),L.addEventListener("click",F),w.addEventListener("click",P),document.addEventListener("keydown",E),document.addEventListener("click",S),M.checkFilmInWatchedLocStor(t)&&(_.classList.add("is-hidden"),y.classList.remove("is-hidden"));M.checkFilmInQueueLocStor(t)&&(L.classList.add("is-hidden"),w.classList.remove("is-hidden"))}));let k={};const M=new(0,g.default);function E(e){"Escape"==e.code&&(a.refs.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function S(e){e.target==a.refs.backdropOneMovie&&(a.refs.backdropOneMovie.classList.add("is-hidden"),document.body.classList.remove("modal-open"))}function q(){return JSON.parse(localStorage.getItem("currentFilms"))}function T(){M.refreshData(),M.addToWatchedFilms(k),M.saveWatchedFilms(),_.classList.add("is-hidden"),y.classList.remove("is-hidden")}function F(){M.myAddToQueueFilms(k),L.classList.add("is-hidden"),w.classList.remove("is-hidden")}function N(){_.classList.remove("is-hidden"),y.classList.add("is-hidden"),M.removeFromWatched(k)}function P(){L.classList.remove("is-hidden"),w.classList.add("is-hidden"),M.removeFromQueue(k)}q(),i("6xCY0"),i("ljBKB");const I=document.querySelector(".scroll-btn");window.onscroll=function(){document.body.scrollTop>30||document.documentElement.scrollTop>30?I.style.display="flex":I.style.display="none"},i("jew7v");
//# sourceMappingURL=index.9ca6f395.js.map
