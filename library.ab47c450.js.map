{"mappings":"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","sources":["src/library.js"],"sourcesContent":["// Федір, твори магію)\nimport './js/scrollBtn';\nimport './js/onClickBtnActions';\nimport { refs } from './js/refs';\nimport { renderFilmsLibrary } from './js/renderMarkup';\nimport FilmsStorage from './js/watched-queue';\nimport { getGenres } from './js/renderMarkup';\nimport { setImgInLib, removeImgInLib } from './js/renderMarkup';\nimport { createTrailerLink } from './js/trailers';\n//\n\nconst storage = new FilmsStorage();\nconst movieDescription = document.querySelector('.modal__wrap');\nrefs.closeModalBtnForOneMovie.addEventListener('click', onCloseModal);\nrefs.libGallery.addEventListener('click', onOpenModal);\n\n//\nlet addToWatchedBtn;\n\nlet addToQueueBtn;\nlet removeFromWatchedBtn;\nlet removeFromQueueBtn;\nlet currentFilm = {};\n\nrenderFilmsLibrary(storage.getWathedFilmsList());\n\nconst queueBtn = document.querySelector('.queue-button');\nconst wachedBtn = document.querySelector('.watched-button');\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nwachedBtn.addEventListener('click', onWachedBtnClick);\n\nfunction onQueueBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getQueueFilmsList());\n\n  queueBtn.style.backgroundColor = '#ff6b01';\n  queueBtn.style.border = 'none';\n  wachedBtn.style.backgroundColor = 'transparent';\n  wachedBtn.style.border = '1px solid white';\n\n  wachedBtn.classList.remove('currentbtn');\n  queueBtn.classList.add('currentbtn');\n\n  setRemoveQueuePlug();\n}\nfunction onWachedBtnClick() {\n  refs.libGallery.innerHTML = '';\n  renderFilmsLibrary(storage.getWathedFilmsList());\n\n  queueBtn.style.backgroundColor = 'transparent';\n  queueBtn.style.border = '1px solid white';\n  wachedBtn.style.backgroundColor = '#ff6b01';\n  wachedBtn.style.border = 'none';\n\n  queueBtn.classList.remove('currentbtn');\n  wachedBtn.classList.add('currentbtn');\n\n  setRemoveWatchedPlug();\n}\n\nfunction onEscapeClick(event) {\n  if (event.code == 'Escape') {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.target == refs.backdropOneMovie) {\n    refs.backdropOneMovie.classList.add('is-hidden');\n    document.body.classList.remove('modal-open');\n  }\n}\n\n// findFilmFunc\nfunction findCurrentFilm(id) {\n  let filmsSet = [];\n  if (wachedBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('watched-films'));\n  }\n  if (queueBtn.classList.contains('currentbtn')) {\n    filmsSet = JSON.parse(localStorage.getItem('queue-films'));\n  }\n\n  currentFilm = filmsSet.find(film => film.id === id);\n  return currentFilm;\n}\n// missclick\nfunction checkClick(e) {\n  const element = e.target.nodeName;\n  const emptyIMG = e.target;\n  if (emptyIMG.getAttribute('alt') === 'plug') {\n    return false;\n  }\n\n  if (\n    element === 'DIV' ||\n    element === 'IMG' ||\n    element === 'P' ||\n    element === 'SPAN'\n  ) {\n    return true;\n  }\n  return false;\n}\n\nfunction onOpenModal(e) {\n  if (!checkClick(e)) {\n    return;\n  }\n  refs.btnScroll.style.display = 'none';\n  refs.backdropOneMovie.classList.remove('is-hidden');\n  document.body.classList.add('modal-open');\n\n  const idFilm = Number(e.target.id);\n\n  const curentObject = findCurrentFilm(idFilm);\n\n  renderOneMovieForModal(curentObject);\n\n  //\n\n  addToWatchedBtn = document.querySelector('.btn__modal-add');\n  addToQueueBtn = document.querySelector('.btn__modal-queue');\n  removeFromQueueBtn = document.querySelector('.btn__modal-r-queue');\n  removeFromWatchedBtn = document.querySelector('.btn__modal-r-watched');\n\n  addToWatchedBtn.addEventListener('click', addToWatchedLS);\n  removeFromWatchedBtn.addEventListener('click', removeFromWatchedLS);\n  addToQueueBtn.addEventListener('click', addToQueueLS);\n  removeFromQueueBtn.addEventListener('click', removeFromQueueLS);\n  // trailer\n  const trailerBtn = document.querySelector('.play-trailer');\n  trailerBtn.addEventListener('click', createTrailerLink);\n\n  document.addEventListener('keydown', onEscapeClick);\n  document.addEventListener('click', onBackdropClick);\n\n  if (storage.checkFilmInWatchedLocStor(curentObject)) {\n    addToWatchedBtn.classList.add('is-hidden');\n    removeFromWatchedBtn.classList.remove('is-hidden');\n  }\n  if (storage.checkFilmInQueueLocStor(curentObject)) {\n    addToQueueBtn.classList.add('is-hidden');\n    removeFromQueueBtn.classList.remove('is-hidden');\n  }\n}\n\nfunction onCloseModal() {\n  refs.backdropOneMovie.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n\n  document.removeEventListener('keydown', onEscapeClick);\n  document.removeEventListener('click', onBackdropClick);\n}\n\nfunction renderOneMovieForModal({\n  genre_ids,\n  poster_path,\n  original_title,\n  overview,\n  popularity,\n  title,\n  vote_average,\n  vote_count,\n  id,\n}) {\n  movieDescription.innerHTML = '';\n  const poster = poster_path\n    ? `https://image.tmdb.org/t/p/w500${poster_path}`\n    : `https://image.tmdb.org/t/p/w500/yEvumAoCB9Z7o9dAzjxrjcwo2FQ.jpg`;\n  return (movieDescription.innerHTML = `\n  <div class=\"image__wrap\">\n    <img class=\"image\" src=\"https://image.tmdb.org/t/p/original${poster}\" alt=\"${\n    title || 'No title'\n  }\" />\n  </div>\n  <div class=\"description__wrap\">\n    <h1 class=\"description__title\">${title || 'No title'}</h1>\n    <table>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Vote / Votes</td>\n        <td class=\"description__table-result\">\n          <span class=\"votes\">${vote_average.toFixed(1) || 'No data'}</span> /${\n    vote_count || 'No data'\n  }\n        </td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Popularity</td>\n        <td class=\"description__table-result\">${\n          popularity.toFixed(1) || 'No data'\n        }</td>\n      </tr>\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Original Title</td>\n        <td class=\"description__table-result\">${\n          original_title || 'No original title'\n        }</td>\n      </tr>\n\n      <tr class=\"table__wrap\">\n        <td class=\"description__table\">Genre</td>\n        <td class=\"description__table-result\">${\n          getGenres(genre_ids, 100) || 'No genres info'\n        }</td>\n      </tr>\n    </table>\n    <p class=\"descrption__about\">ABOUT</p>\n    <p class=\"description__text\">\n     ${overview || 'There is no imformation about this movie'}\n    </p>\n    <ul class=\"btn__wrap\">\n      <li>\n        <button class=\"btn btn__modal-add\">add to Watched</button>\n        <button class=\"btn btn__modal-r-watched is-hidden\">remove from Watched</button>\n      </li>\n      <li>\n        <button class=\"btn btn__modal-queue\">add to queue</button>\n        <button class=\"btn btn__modal-r-queue is-hidden\">remove from queue</button>\n      </li>\n    </ul>\n    <div class=\"btn__wrap\">\n    <button class=\"btn play-trailer\" id=\"${id}\">Watch Trailer</button>\n    </div>\n  </div>\n`);\n}\n\n//функціонал для ЛС\nfunction addToWatchedLS() {\n  storage.refreshData();\n\n  storage.addToWatchedFilms(currentFilm);\n  storage.saveWatchedFilms();\n\n  //\n\n  addToWatchedBtn.classList.add('is-hidden');\n  removeFromWatchedBtn.classList.remove('is-hidden');\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    if (storage.getWathedFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n\nfunction removeFromWatchedLS() {\n  addToWatchedBtn.classList.remove('is-hidden');\n  removeFromWatchedBtn.classList.add('is-hidden');\n\n  storage.removeFromWatched(currentFilm);\n\n  if (wachedBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getWathedFilmsList().length === 0) {\n    setImgInLib();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n// uquqee\n\nfunction addToQueueLS() {\n  storage.myAddToQueueFilms(currentFilm);\n\n  addToQueueBtn.classList.add('is-hidden');\n  removeFromQueueBtn.classList.remove('is-hidden');\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    if (storage.getQueueFilmsList().length === 1) {\n      refs.libGallery.innerHTML = '';\n    }\n    addToDOMelement();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n\nfunction removeFromQueueLS() {\n  addToQueueBtn.classList.remove('is-hidden');\n  removeFromQueueBtn.classList.add('is-hidden');\n\n  storage.removeFromQueue(currentFilm);\n\n  if (queueBtn.classList.contains('currentbtn')) {\n    removeFromDomElement();\n  }\n  if (storage.getQueueFilmsList().length === 0) {\n    setImgInLib();\n  }\n  setRemoveQueuePlug();\n  setRemoveWatchedPlug();\n}\n\nfunction removeFromDomElement() {\n  const el = document.getElementById(currentFilm.id);\n  el.remove();\n}\nfunction addToDOMelement() {\n  renderFilmsLibrary([currentFilm]);\n}\n\nfunction setRemoveWatchedPlug() {\n  if (wachedBtn.classList.contains('currentbtn')) {\n    if (\n      storage.getWathedFilmsList() === undefined ||\n      !storage.getWathedFilmsList().length\n    ) {\n      setImgInLib();\n    } else {\n      removeImgInLib();\n    }\n  }\n}\nfunction setRemoveQueuePlug() {\n  if (queueBtn.classList.contains('currentbtn')) {\n    if (\n      storage.getQueueFilmsList() === undefined ||\n      !storage.getQueueFilmsList().length\n    ) {\n      setImgInLib();\n    } else {\n      removeImgInLib();\n    }\n  }\n}\n"],"names":["parcelRequire","$ce3726a01b8ab25a$var$storage","$jew7v","default","$ce3726a01b8ab25a$var$movieDescription","document","querySelector","$ce3726a01b8ab25a$var$addToWatchedBtn","$ce3726a01b8ab25a$var$addToQueueBtn","$ce3726a01b8ab25a$var$removeFromWatchedBtn","$ce3726a01b8ab25a$var$removeFromQueueBtn","$krGWQ","refs","closeModalBtnForOneMovie","addEventListener","backdropOneMovie","classList","add","body","remove","removeEventListener","$ce3726a01b8ab25a$var$onEscapeClick","$ce3726a01b8ab25a$var$onBackdropClick","libGallery","e","element","target","nodeName","getAttribute","$ce3726a01b8ab25a$var$checkClick","btnScroll","style","display","curentObject","id","filmsSet","$ce3726a01b8ab25a$var$wachedBtn","contains","JSON","parse","localStorage","getItem","$ce3726a01b8ab25a$var$queueBtn","$ce3726a01b8ab25a$var$currentFilm","find","film","$ce3726a01b8ab25a$var$findCurrentFilm","Number","genre_ids","poster_path","original_title","overview","popularity","title","vote_average","vote_count","innerHTML","poster","toFixed","$cky31","getGenres","$ce3726a01b8ab25a$var$renderOneMovieForModal","$ce3726a01b8ab25a$var$addToWatchedLS","$ce3726a01b8ab25a$var$removeFromWatchedLS","$ce3726a01b8ab25a$var$addToQueueLS","$ce3726a01b8ab25a$var$removeFromQueueLS","$lUanL","createTrailerLink","checkFilmInWatchedLocStor","checkFilmInQueueLocStor","renderFilmsLibrary","getWathedFilmsList","event","code","refreshData","addToWatchedFilms","saveWatchedFilms","length","$ce3726a01b8ab25a$var$addToDOMelement","$ce3726a01b8ab25a$var$setRemoveQueuePlug","$ce3726a01b8ab25a$var$setRemoveWatchedPlug","removeFromWatched","$ce3726a01b8ab25a$var$removeFromDomElement","setImgInLib","myAddToQueueFilms","getQueueFilmsList","removeFromQueue","getElementById","undefined","removeImgInLib","backgroundColor","border"],"version":3,"file":"library.ab47c450.js.map"}